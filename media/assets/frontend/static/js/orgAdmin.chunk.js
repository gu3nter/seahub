(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[11],{1560:function(e,t,r){r(49),e.exports=r(1666)},1561:function(e,t,r){},1666:function(e,t,r){"use strict";r.r(t);var n=r(6),s=r(7),a=r(9),i=r(8),c=r(2),o=r.n(c),l=r(21),d=r.n(l),h=r(15),j=r(1),u=r(85),b=r(0),p=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(n.a)(this,r);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).getActiveClass=function(t){return e.props.currentTab==t?"active":""},e.tabItemClick=function(t){e.props.tabItemClick(t)},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"side-panel ".concat(this.props.isSidePanelClosed?"":"left-zero"),children:[Object(b.jsx)("div",{className:"side-panel-north",children:Object(b.jsx)(u.a,{onCloseSidePanel:this.props.onCloseSidePanel})}),Object(b.jsx)("div",{className:"side-panel-center",children:Object(b.jsx)("div",{className:"side-nav",children:Object(b.jsxs)("div",{className:"side-nav-con",children:[Object(b.jsx)("h3",{className:"sf-heading",style:{color:"#f7941d"},children:Object(j.rb)("Admin")}),Object(b.jsxs)("ul",{className:"nav nav-pills flex-column nav-container",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("orgmanage")),to:j.rc+"org/orgmanage/",onClick:function(){return e.tabItemClick("orgmanage")},children:[Object(b.jsx)("span",{className:"sf2-icon-info"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.rb)("Info")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("repoadmin")),to:j.rc+"org/repoadmin/",onClick:function(){return e.tabItemClick("repoadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-library"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.rb)("Libraries")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("users")||this.getActiveClass("admins")),to:j.rc+"org/useradmin/",onClick:function(){return e.tabItemClick("users")},children:[Object(b.jsx)("span",{className:"sf2-icon-user"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.rb)("Users")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("groupadmin")),to:j.rc+"org/groupadmin/",onClick:function(){return e.tabItemClick("groupadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-group"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.rb)("Groups")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("departmentadmin")),to:j.rc+"org/departmentadmin/",onClick:function(){return e.tabItemClick("departmentadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-organization"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.rb)("Departments")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("publinkadmin")),to:j.rc+"org/publinkadmin/",onClick:function(){return e.tabItemClick("publinkadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-link"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.rb)("Links")})]})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsxs)(h.a,{className:"nav-link ellipsis ".concat(this.getActiveClass("logadmin")||this.getActiveClass("file-update")||this.getActiveClass("perm-audit")),to:j.rc+"org/logadmin/",onClick:function(){return e.tabItemClick("logadmin")},children:[Object(b.jsx)("span",{className:"sf2-icon-clock"}),Object(b.jsx)("span",{className:"nav-text",children:Object(j.rb)("Logs")})]})})]})]})})})]})}}]),r}(o.a.Component),g=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).navItems=[{name:"all",urlPart:"useradmin",text:Object(j.rb)("All")},{name:"admins",urlPart:"useradmin/admins",text:Object(j.rb)("Admin")}],s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.currentItem;return Object(b.jsx)("div",{className:"cur-view-path tab-nav-container",children:Object(b.jsx)("ul",{className:"nav",children:this.navItems.map((function(t,r){return Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(j.rc,"org/").concat(t.urlPart,"/"),className:"nav-link".concat(e==t.name?" active":""),children:t.text})},r)}))})})}}]),r}(o.a.Component),m=r(4),O=r(10),f=r(5),x=r(11),v=r(80),w=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(n.a)(this,r);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).translateStatus=function(e){return"active"===e?Object(j.rb)("Active"):"inactive"===e?Object(j.rb)("Inactive"):void 0},e}return Object(s.a)(r,[{key:"render",value:function(){return Object(b.jsx)(v.a,{isTextMode:this.props.isTextMode,isEditIconShow:this.props.isEditIconShow,options:this.props.statusArray,currentOption:this.props.currentStatus,onOptionChanged:this.props.onStatusChanged,translateOption:this.translateStatus})}}]),r}(o.a.Component),D=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({showMenu:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({showMenu:!1,highlight:!1})},s.toggleDelete=function(){var e=s.props.user.email;s.props.toggleDelete(e)},s.toggleResetPW=function(){var e=s.props.user,t=e.email,r=e.name;x.a.success(Object(j.rb)("Resetting user's password, please wait for a moment.")),O.a.orgAdminResetOrgUserPassword(j.Vb,t).then((function(e){var t;t=(t=(t=Object(j.rb)("Successfully reset password to %(passwd)s for user %(user)s.")).replace("%(passwd)s",e.data.new_password)).replace("%(user)s",r),x.a.success(t,{duration:15})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.toggleRevokeAdmin=function(){var e=s.props.user.email;s.props.toggleRevokeAdmin(e)},s.changeStatus=function(e){var t;t="active"==e?"true":"false",O.a.orgAdminChangeOrgUserStatus(j.Vb,s.props.user.email,t).then((function(e){s.setState({currentStatus:"true"==t?"active":"inactive",highlight:!1,showMenu:!1}),x.a.success(Object(j.rb)("Edit succeeded."))})).catch((function(e){var t=f.a.getErrorMsg(e);t===Object(j.rb)("Error")&&(t=Object(j.rb)("Edit failed.")),x.a.danger(t)}))},s.onDropdownToggleClick=function(e){e.preventDefault(),s.toggleOperationMenu(e)},s.toggleOperationMenu=function(e){e.stopPropagation(),s.setState({isItemMenuShow:!s.state.isItemMenuShow},(function(){s.state.isItemMenuShow?s.props.onFreezedItem():(s.setState({highlight:!1,showMenu:!1}),s.props.onUnfreezedItem())}))},s.getQuotaTotal=function(e){switch(e){case-1:return Object(j.rb)("Failed");case-2:return"--";default:return f.a.formatSize({bytes:e})}},s.state={highlight:!1,showMenu:!1,currentStatus:s.props.user.is_active?"active":"inactive",isItemMenuShow:!1},s.statusArray=["active","inactive"],s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props,t=e.user,r=e.currentTab,n=j.rc+"org/useradmin/info/"+encodeURIComponent(t.email)+"/",s=t.email!==j.Dc&&this.state.showMenu,a=s;return Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:n,children:t.name})}),Object(b.jsx)("td",{children:Object(b.jsx)(w,{isTextMode:!0,isEditIconShow:a,currentStatus:this.state.currentStatus,statusArray:this.statusArray,onStatusChanged:this.changeStatus})}),Object(b.jsx)("td",{children:"".concat(f.a.formatSize({bytes:t.quota_usage})," / ").concat(this.getQuotaTotal(t.quota_total))}),Object(b.jsxs)("td",{children:[t.ctime," /",Object(b.jsx)("br",{}),t.last_login?t.last_login:"--"]}),Object(b.jsx)("td",{className:"text-center cursor-pointer",children:s&&Object(b.jsxs)(m.i,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.l,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.rb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsxs)(m.k,{children:[Object(b.jsx)(m.j,{onClick:this.toggleDelete,children:Object(j.rb)("Delete")}),Object(b.jsx)(m.j,{onClick:this.toggleResetPW,children:Object(j.rb)("ResetPwd")}),"admins"==r&&Object(b.jsx)(m.j,{onClick:this.toggleRevokeAdmin,children:Object(j.rb)("Revoke Admin")})]})]})})]})}}]),r}(o.a.Component),S=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onFreezedItem=function(){s.setState({isItemFreezed:!0})},s.onUnfreezedItem=function(){s.setState({isItemFreezed:!1})},s.onChangePageNum=function(e,t){e.preventDefault();var r=s.props.page;1==t?r+=1:r-=1,s.props.initOrgUsersData(r)},s.sortByQuotaUsage=function(e){e.preventDefault(),s.props.sortByQuotaUsage()},s.state={isItemFreezed:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e,t=this,r=this.props,n=r.sortBy,s=r.sortOrder;e=""==n?Object(b.jsx)("span",{className:"fas fa-sort"}):Object(b.jsx)("span",{className:"fas ".concat("asc"==s?"fa-caret-up":"fa-caret-down")});var a=this.props,i=a.orgUsers,c=a.page,o=a.pageNext;return Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Status")}),Object(b.jsxs)("th",{width:"20%",children:[Object(b.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByQuotaUsage,children:[Object(j.rb)("Space Used")," ",e]})," / ",Object(j.rb)("Quota")]}),Object(b.jsxs)("th",{width:"25%",children:[Object(j.rb)("Created At")," / ",Object(j.rb)("Last Login")]}),Object(b.jsx)("th",{width:"10%"})]})}),Object(b.jsx)("tbody",{children:i.map((function(e,r){return Object(b.jsx)(D,{user:e,currentTab:"users",isItemFreezed:t.state.isItemFreezed,toggleDelete:t.props.toggleDelete,onFreezedItem:t.onFreezedItem,onUnfreezedItem:t.onUnfreezedItem},r)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=c&&Object(b.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,-1)},children:Object(j.rb)("Previous")}),1!=c&&o&&Object(b.jsx)("span",{children:" | "}),o&&Object(b.jsx)("a",{href:"#",onClick:function(e){return t.onChangePageNum(e,1)},children:Object(j.rb)("Next")})]})]})}}]),r}(o.a.Component),N=r(60),I=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"main-panel-north ".concat(this.props.children?"border-left-show":""),children:[Object(b.jsxs)("div",{className:"cur-view-toolbar",children:[Object(b.jsx)("span",{className:"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none",title:"Side Nav Menu"}),Object(b.jsx)("div",{className:"operation",children:this.props.children})]}),Object(b.jsxs)("div",{className:"common-toolbar",children:[this.props.search&&this.props.search,Object(b.jsx)(N.a,{isAdminPanel:!0})]})]})}}]),r}(c.Component),C=r(18),M=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleSubmit=function(){if(s.validateInputParams()){var e=s.state,t=e.email,r=e.name,n=e.password;s.setState({isAddingUser:!0}),s.props.handleSubmit(t,r.trim(),n)}},s.handleKeyPress=function(e){e.preventDefault(),"Enter"==e.key&&s.handleSubmit(e)},s.togglePasswordVisible=function(){s.setState({isPasswordVisible:!s.state.isPasswordVisible},(function(){s.state.isPasswordVisible?(s.passwdInput.type="password",s.passwdNewInput.type="password"):(s.passwdInput.type="text",s.passwdNewInput.type="text")}))},s.generatePassword=function(){var e=Math.random().toString(36).substr(5);s.setState({password:e,passwdnew:e,isPasswordVisible:!1},(function(){s.passwdInput.type="text",s.passwdNewInput.type="text"}))},s.inputEmail=function(e){var t=e.target.value.trim();s.setState({email:t})},s.inputName=function(e){var t=e.target.value;s.setState({name:t})},s.inputPassword=function(e){var t=e.target.value.trim();s.setState({password:t},(function(){s.state.isPasswordVisible&&(s.passwdInput.type="password",s.passwdNewInput.type="password")}))},s.inputPasswordNew=function(e){var t=e.target.value.trim();s.setState({passwdnew:t},(function(){s.state.isPasswordVisible&&(s.passwdInput.type="password",s.passwdNewInput.type="password")}))},s.toggle=function(){s.props.toggle()},s.state={isPasswordVisible:!0,email:"",name:"",password:"",passwdnew:"",errMessage:"",isAddingUser:!1},s.passwdInput=o.a.createRef(),s.passwdNewInput=o.a.createRef(),s}return Object(s.a)(r,[{key:"validateInputParams",value:function(){var e;if(!this.state.email.length)return e=Object(j.rb)("email is required"),this.setState({errMessage:e}),!1;if(!this.state.name.trim().length)return e=Object(j.rb)("Name is required"),this.setState({errMessage:e}),!1;var t=this.state.password,r=this.state.passwdnew;return t.length?r.length?t===r||(e=Object(j.rb)("Passwords don't match"),this.setState({errMessage:e}),!1):(e=Object(j.rb)("Please enter the password again"),this.setState({errMessage:e}),!1):(e=Object(j.rb)("Please enter password"),this.setState({errMessage:e}),!1)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.toggle,children:[Object(b.jsx)(m.x,{toggle:this.toggle,children:Object(j.rb)("Add User")}),Object(b.jsxs)(m.v,{children:[Object(b.jsxs)(m.m,{children:[Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.t,{for:"userEmail",children:Object(j.rb)("Email")}),Object(b.jsx)(m.p,{id:"userEmail",value:this.state.email||"",onChange:this.inputEmail})]}),Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.t,{for:"userName",children:Object(j.rb)("Name")}),Object(b.jsx)(m.p,{id:"userName",value:this.state.name||"",onChange:this.inputName})]}),Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.t,{for:"userPwd",children:Object(j.rb)("Password")}),Object(b.jsxs)(m.q,{className:"passwd",children:[Object(b.jsx)(m.p,{id:"userPwd",innerRef:function(t){e.passwdInput=t},value:this.state.password||"",onChange:this.inputPassword}),Object(b.jsxs)(m.r,{addonType:"append",children:[Object(b.jsx)(m.c,{onClick:this.togglePasswordVisible,children:Object(b.jsx)("i",{className:"link-operation-icon fas ".concat(this.state.isPasswordVisible?"fa-eye-slash":"fa-eye")})}),Object(b.jsx)(m.c,{onClick:this.generatePassword,children:Object(b.jsx)("i",{className:"link-operation-icon fas fa-magic"})})]})]})]}),Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.t,{for:"userPwdNew",children:Object(j.rb)("Confirm Password")}),Object(b.jsx)(m.p,{id:"userPwdNew",innerRef:function(t){e.passwdNewInput=t},className:"passwd",value:this.state.passwdnew||"",onChange:this.inputPasswordNew})]})]}),this.state.errMessage&&Object(b.jsx)(m.t,{className:"err-message",children:this.state.errMessage})]}),Object(b.jsx)(m.w,{children:Object(b.jsx)(m.c,{color:"primary",disabled:this.state.isAddingUser,onClick:this.handleSubmit,className:this.state.isAddingUser?"btn-loading":"",children:Object(j.rb)("Submit")})})]})}}]),r}(o.a.Component),y=r(119),k=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).copyLink=function(){Object(y.a)(s.props.invitationLink),s.props.toggle();var e=Object(j.rb)("Internal link has been copied to clipboard");x.a.success(e)},s}return Object(s.a)(r,[{key:"render",value:function(){return Object(b.jsxs)(m.u,{isOpen:!0,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:Object(j.rb)("Invite user")}),Object(b.jsxs)(m.v,{children:[Object(b.jsx)("p",{children:Object(j.rb)("Send the invitation link to the others, and they will be able to join the organization via scanning the QR code.")}),Object(b.jsx)("p",{children:this.props.invitationLink})]}),Object(b.jsx)(m.w,{children:Object(b.jsx)(m.c,{color:"primary",onClick:this.copyLink,children:Object(j.rb)("Copy")})})]})}}]),r}(o.a.Component),_=r(13),A=r.n(_);A.a.locale(j.Fb);var z=function e(t){Object(n.a)(this,e),this.id=t.id,this.name=t.name,this.email=t.email,this.contact_email=t.owner_contact_email,this.is_active=t.is_active,this.quota_usage=t.quota_usage,this.quota_total=t.quota_total,this.last_login=t.last_login?A()(t.last_login).fromNow():"--",this.ctime=A()(t.ctime).format("YYYY-MM-DD HH:mm:ss")},R=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleInputChange=function(e){s.setState({value:e.target.value})},s.handleKeyPress=function(e){"Enter"==e.key&&(e.preventDefault(),s.handleSubmit())},s.handleSubmit=function(){var e=s.state.value.trim();if(!e)return!1;s.props.submit(e)},s.state={value:""},s}return Object(s.a)(r,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"input-icon",children:[Object(b.jsx)("i",{className:"d-flex input-icon-addon fas fa-search"}),Object(b.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoComplete:"off"})]})}}]),r}(o.a.Component),U=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).sortByQuotaUsage=function(){s.setState({sortBy:"quota_usage",sortOrder:"asc"==s.state.sortOrder?"desc":"asc",page:1},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),r=s.state,n=r.page,a=r.sortBy,i=r.sortOrder;t.set("page",n),t.set("order_by",a),t.set("direction",i),e.search=t.toString(),Object(h.c)(e.toString()),s.initOrgUsersData(n)}))},s.toggleAddOrgUser=function(){s.setState({isShowAddOrgUserDialog:!s.state.isShowAddOrgUserDialog})},s.toggleInviteUserDialog=function(){s.setState({isInviteUserDialogOpen:!s.state.isInviteUserDialogOpen})},s.initOrgUsersData=function(e){var t=s.state,r=t.sortBy,n=t.sortOrder;O.a.orgAdminListOrgUsers(j.Vb,"",e,r,n).then((function(e){var t=e.data.user_list.map((function(e){return new z(e)}));s.setState({orgUsers:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.addOrgUser=function(e,t,r){O.a.orgAdminAddOrgUser(j.Vb,e,t,r).then((function(t){var r=new z(t.data);s.state.orgUsers.unshift(r),s.setState({orgUsers:s.state.orgUsers}),s.toggleAddOrgUser();var n=Object(j.rb)("successfully added user %s.");n=n.replace("%s",e),x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t),s.toggleAddOrgUser()}))},s.toggleOrgUsersDelete=function(e){O.a.orgAdminDeleteOrgUser(j.Vb,e).then((function(t){var r=s.state.orgUsers.filter((function(t){return t.email!=e}));s.setState({orgUsers:r});var n=Object(j.rb)("Successfully deleted %s");n=n.replace("%s",e),x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.searchItems=function(e){Object(h.c)("".concat(j.rc,"org/useradmin/search-users/?query=").concat(encodeURIComponent(e)))},s.getSearch=function(){return Object(b.jsx)(R,{placeholder:Object(j.rb)("Search users"),submit:s.searchItems})},s.state={orgUsers:[],page:1,pageNext:!1,sortBy:"",sortOrder:"asc",isShowAddOrgUserDialog:!1,isInviteUserDialogOpen:!1},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,r=this.state,n=r.page,s=r.sortBy,a=r.sortOrder;this.setState({page:parseInt(t.get("page")||n),sortBy:t.get("order_by")||s,sortOrder:t.get("direction")||a},(function(){e.initOrgUsersData(e.state.page)}))}},{key:"render",value:function(){var e,t="btn btn-secondary operation-item";return e=Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("button",{className:t,title:Object(j.rb)("Add user"),onClick:this.toggleAddOrgUser,children:[Object(b.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(j.rb)("Add user")]}),j.xb&&Object(b.jsxs)("button",{className:t,title:Object(j.rb)("Invite user"),onClick:this.toggleInviteUserDialog,children:[Object(b.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(j.rb)("Invite user")]}),this.state.isShowAddOrgUserDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(M,{handleSubmit:this.addOrgUser,toggle:this.toggleAddOrgUser})}),this.state.isInviteUserDialogOpen&&Object(b.jsx)(C.a,{children:Object(b.jsx)(k,{invitationLink:j.xb,toggle:this.toggleInviteUserDialog})})]}),Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{children:e,search:this.getSearch()}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(g,{currentItem:"all"}),Object(b.jsx)(S,{initOrgUsersData:this.initOrgUsersData,toggleDelete:this.toggleOrgUsersDelete,orgUsers:this.state.orgUsers,page:this.state.page,pageNext:this.state.pageNext,sortBy:this.state.sortBy,sortOrder:this.state.sortOrder,sortByQuotaUsage:this.sortByQuotaUsage})]})})]})}}]),r}(c.Component),F=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onFreezedItem=function(){s.setState({isItemFreezed:!0})},s.onUnfreezedItem=function(){s.setState({isItemFreezed:!1})},s.state={isItemFreezed:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=this.props.orgUsers;return Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Status")}),Object(b.jsxs)("th",{width:"20%",children:[Object(b.jsx)("a",{className:"d-inline-block table-sort-op",href:"#",children:Object(j.rb)("Space Used")})," / ",Object(j.rb)("Quota")]}),Object(b.jsxs)("th",{width:"25%",children:[Object(j.rb)("Created At")," / ",Object(j.rb)("Last Login")]}),Object(b.jsx)("th",{width:"10%"})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,r){return Object(b.jsx)(D,{user:t,currentTab:"users",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem},r)}))})]})})}}]),r}(o.a.Component),L=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).getItems=function(){O.a.orgAdminSearchUser(j.Vb,s.state.query.trim()).then((function(e){var t=e.data.user_list.map((function(e){return new z(e)}));s.setState({orgUsers:t,loading:!1})})).catch((function(e){s.setState({loading:!1,errorMsg:f.a.getErrorMsg(e,!0)})}))},s.deleteUser=function(e){O.a.orgAdminDeleteOrgUser(j.Vb,e).then((function(t){var r=s.state.orgUsers.filter((function(t){return t.email!=e}));s.setState({orgUsers:r}),x.a.success(Object(j.rb)("Successfully deleted 1 item."))})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.updateUser=function(e,t,r){O.a.sysAdminUpdateUser(e,t,r).then((function(n){var a=s.state.orgUsers.map((function(r){return r.email==e&&(r[t]=n.data[t]),r}));s.setState({orgUsers:a});var i="is_active"==t&&r?n.data.update_status_tip:Object(j.rb)("Edit succeeded");x.a.success(i)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.handleInputChange=function(e){s.setState({query:e.target.value},s.checkSubmitBtnActive)},s.checkSubmitBtnActive=function(){var e=s.state.query;s.setState({isSubmitBtnActive:e.trim()})},s.state={query:"",orgUsers:[],org_id:"",isSubmitBtnActive:!1,loading:!0,errorMsg:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,r=e.isSubmitBtnActive;return Object(b.jsx)(c.Fragment,{children:Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("Users")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("div",{className:"mt-4 mb-6",children:[Object(b.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.rb)("Search Users")}),Object(b.jsxs)(m.m,{children:[Object(b.jsx)(m.n,{row:!0,children:Object(b.jsx)(m.f,{sm:5,children:Object(b.jsx)(m.p,{type:"text",name:"query",value:t,placeholder:Object(j.rb)("Search users"),onChange:this.handleInputChange})})}),Object(b.jsx)(m.n,{row:!0,children:Object(b.jsx)(m.f,{sm:{size:5},children:Object(b.jsx)("button",{className:"btn btn-outline-primary",disabled:!r,onClick:this.getItems,children:Object(j.rb)("Submit")})})})]})]}),Object(b.jsxs)("div",{className:"mt-4 mb-6",children:[Object(b.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.rb)("Result")}),Object(b.jsx)(F,{toggleDelete:this.deleteUser,orgUsers:this.state.orgUsers})]})]})]})})})}}]),r}(c.Component),E=(r(1561),function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onFreezedItem=function(){s.setState({isItemFreezed:!0})},s.onUnfreezedItem=function(){s.setState({isItemFreezed:!1})},s.state={isItemFreezed:!1},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.props.initOrgAdmin()}},{key:"render",value:function(){var e=this,t=this.props.orgAdminUsers;return Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Status")}),Object(b.jsxs)("th",{width:"20%",children:[Object(j.rb)("Space Used")," / ",Object(j.rb)("Quota")]}),Object(b.jsxs)("th",{width:"25%",children:[Object(j.rb)("Created At")," / ",Object(j.rb)("Last Login")]}),Object(b.jsx)("th",{width:"10%"})]})}),Object(b.jsx)("tbody",{children:t.map((function(t){return Object(b.jsx)(D,{user:t,currentTab:"admins",isItemFreezed:e.state.isItemFreezed,toggleDelete:e.props.toggleDelete,toggleRevokeAdmin:e.props.toggleRevokeAdmin,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem},t.index)}))})]})})}}]),r}(o.a.Component)),P=r(48),G=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleSelectChange=function(e){s.setState({selectedOption:e,errMessage:""}),s.options=[]},s.addOrgAdmin=function(){if(s.state.selectedOption){var e=s.state.selectedOption.email;O.a.orgAdminSetOrgAdmin(j.Vb,e,!0).then((function(e){var t=new z(e.data);s.props.onAddedOrgAdmin(t)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}},s.toggle=function(){s.props.toggle()},s.state={selectedOption:null,errMessage:""},s.options=[],s}return Object(s.a)(r,[{key:"render",value:function(){return Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.toggle,children:[Object(b.jsx)(m.x,{toggle:this.toggle,children:Object(j.rb)("Add Admins")}),Object(b.jsxs)(m.v,{children:[Object(b.jsx)(P.a,{ref:"userSelect",isMulti:!1,className:"reviewer-select",placeholder:Object(j.rb)("Select a user as admin..."),onSelectChange:this.handleSelectChange}),this.state.errMessage&&Object(b.jsx)(m.a,{color:"danger",className:"mt-2",children:this.state.errMessage})]}),Object(b.jsxs)(m.w,{children:[Object(b.jsx)(m.c,{color:"secondary",onClick:this.toggle,children:Object(j.rb)("Close")}),Object(b.jsx)(m.c,{color:"primary",onClick:this.addOrgAdmin,children:Object(j.rb)("Submit")})]})]})}}]),r}(o.a.Component),T=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).toggleAddOrgAdmin=function(){s.setState({isShowAddOrgAdminDialog:!s.state.isShowAddOrgAdminDialog})},s.initOrgAdmin=function(){O.a.orgAdminListOrgUsers(j.Vb,!0).then((function(e){var t=e.data.user_list.map((function(e){return new z(e)}));s.setState({orgAdminUsers:t})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.toggleOrgAdminDelete=function(e){O.a.orgAdminDeleteOrgUser(j.Vb,e).then((function(t){s.setState({orgAdminUsers:s.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var r=Object(j.rb)("Successfully deleted %s");r=r.replace("%s",e),x.a.success(r)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.toggleRevokeAdmin=function(e){O.a.orgAdminSetOrgAdmin(j.Vb,e,!1).then((function(t){s.setState({orgAdminUsers:s.state.orgAdminUsers.filter((function(t){return t.email!=e}))});var r=Object(j.rb)("Successfully revoke the admin permission of %s");r=r.replace("%s",t.data.name),x.a.success(r)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.onAddedOrgAdmin=function(e){s.state.orgAdminUsers.unshift(e),s.setState({orgAdminUsers:s.state.orgAdminUsers});var t=Object(j.rb)("Successfully set %s as admin.");t=t.replace("%s",e.email),x.a.success(t),s.toggleAddOrgAdmin()},s.state={orgAdminUsers:[],isShowAddOrgAdminDialog:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e;return e=Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("button",{className:"btn btn-secondary operation-item",title:Object(j.rb)("Add admin"),onClick:this.toggleAddOrgAdmin,children:[Object(b.jsx)("i",{className:"fas fa-plus-square text-secondary mr-1"}),Object(j.rb)("Add admin")]}),this.state.isShowAddOrgAdminDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(G,{toggle:this.toggleAddOrgAdmin,onAddedOrgAdmin:this.onAddedOrgAdmin})})]}),Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{children:e}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(g,{currentItem:"admins"}),Object(b.jsx)(E,{currentTab:"admins",toggleDelete:this.toggleOrgAdminDelete,toggleRevokeAdmin:this.toggleRevokeAdmin,orgAdminUsers:this.state.orgAdminUsers,initOrgAdmin:this.initOrgAdmin})]})})]})}}]),r}(c.Component),q=r(14),B=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props,t=e.email,r=e.currentItem,n="".concat(j.rc,"org/useradmin/info/").concat(encodeURIComponent(t),"/");return Object(b.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:Object(b.jsxs)("ul",{className:"nav",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:n,className:"nav-link".concat("profile"==r?" active":""),children:Object(j.rb)("Profile")})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(n,"repos/"),className:"nav-link".concat("owned-repos"==r?" active":""),children:Object(j.rb)("Owned Libraries")})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(n,"shared-repos/"),className:"nav-link".concat("shared-repos"==r?" active":""),children:Object(j.rb)("Shared Libraries")})})]})})}}]),r}(o.a.Component),V=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleInputChange=function(e){s.setState({inputValue:e.target.value})},s.formSubmit=function(){var e=s.props,t=e.orgID,r=e.email,n=s.state.inputValue.trim();s.setState({submitBtnDisabled:!0}),O.a.orgAdminSetOrgUserName(t,r,n).then((function(e){var t=n?e.data.name:"";s.props.updateName(t),s.props.toggleDialog()})).catch((function(e){var t=f.a.getErrorMsg(e);s.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},s.state={inputValue:s.props.name,submitBtnDisabled:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.state,t=e.inputValue,r=e.formErrorMsg,n=e.submitBtnDisabled;return Object(b.jsxs)(m.u,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[Object(b.jsx)(m.x,{toggle:this.props.toggleDialog,children:Object(j.rb)("Set user name")}),Object(b.jsx)(m.v,{children:Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),r&&Object(b.jsx)("p",{className:"error m-0 mt-2",children:r})]})}),Object(b.jsxs)(m.w,{children:[Object(b.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:Object(j.rb)("Cancel")}),Object(b.jsx)("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit,children:Object(j.rb)("Submit")})]})]})}}]),r}(o.a.Component),Q=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleInputChange=function(e){s.setState({inputValue:e.target.value})},s.formSubmit=function(){var e=s.props,t=e.orgID,r=e.email,n=s.state.inputValue.trim();s.setState({submitBtnDisabled:!0}),O.a.orgAdminSetOrgUserContactEmail(t,r,n).then((function(e){var t=n?e.data.contact_email:"";s.props.updateContactEmail(t),s.props.toggleDialog()})).catch((function(e){var t=f.a.getErrorMsg(e);s.setState({formErrorMsg:t,submitBtnDisabled:!1})}))},s.state={inputValue:s.props.contactEmail,submitBtnDisabled:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.state,t=e.inputValue,r=e.formErrorMsg,n=e.submitBtnDisabled;return Object(b.jsxs)(m.u,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[Object(b.jsx)(m.x,{toggle:this.props.toggleDialog,children:Object(j.rb)("Set user contact email")}),Object(b.jsx)(m.v,{children:Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),r&&Object(b.jsx)("p",{className:"error m-0 mt-2",children:r})]})}),Object(b.jsxs)(m.w,{children:[Object(b.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:Object(j.rb)("Cancel")}),Object(b.jsx)("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit,children:Object(j.rb)("Submit")})]})]})}}]),r}(o.a.Component),H=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;Object(n.a)(this,r),(s=t.call(this,e)).handleInputChange=function(e){s.setState({inputValue:e.target.value})},s.formSubmit=function(){var e=s.props,t=e.orgID,r=e.email,n=s.state.inputValue.trim();if(!n)return s.setState({formErrorMsg:Object(j.rb)("It is required.")}),!1;s.setState({submitBtnDisabled:!0}),O.a.orgAdminSetOrgUserQuota(t,r,n).then((function(e){s.props.updateQuota(e.data.quota_total),s.props.toggleDialog()})).catch((function(e){var t=f.a.getErrorMsg(e);s.setState({formErrorMsg:t,submitBtnDisabled:!1})}))};var a=s.props.quotaTotal<0?"":s.props.quotaTotal/1e6;return s.state={inputValue:a,submitBtnDisabled:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.state,t=e.inputValue,r=e.formErrorMsg,n=e.submitBtnDisabled;return Object(b.jsxs)(m.u,{isOpen:!0,centered:!0,toggle:this.props.toggleDialog,children:[Object(b.jsx)(m.x,{toggle:this.props.toggleDialog,children:Object(j.rb)("Set user quota")}),Object(b.jsx)(m.v,{children:Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsxs)(m.q,{children:[Object(b.jsx)("input",{type:"text",className:"form-control",value:t,onChange:this.handleInputChange}),Object(b.jsx)(m.r,{addonType:"append",children:Object(b.jsx)(m.s,{children:"MB"})})]}),Object(b.jsx)("p",{className:"small text-secondary mt-2 mb-2",children:Object(j.rb)("Tip: 0 means default limit")}),r&&Object(b.jsx)("p",{className:"error m-0 mt-2",children:r})]})}),Object(b.jsxs)(m.w,{children:[Object(b.jsx)("button",{className:"btn btn-secondary",onClick:this.props.toggleDialog,children:Object(j.rb)("Cancel")}),Object(b.jsx)("button",{className:"btn btn-primary",disabled:n,onClick:this.formSubmit,children:Object(j.rb)("Submit")})]})]})}}]),r}(o.a.Component),Y=(r(220),window.org.pageOptions),K=Y.orgID,W=Y.orgName,J=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).updateName=function(e){s.setState({name:e})},s.updateContactEmail=function(e){s.setState({contact_email:e})},s.updateQuota=function(e){s.setState({quota_total:e})},s.state={loading:!0,errorMsg:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetOrgUserInfo(K,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(B,{email:this.props.email,currentItem:"profile"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)($,{data:this.state,updateName:this.updateName,updateContactEmail:this.updateContactEmail,updateQuota:this.updateQuota})})]})})]})}}]),r}(c.Component),$=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).toggleSetNameDialog=function(){s.setState({isSetNameDialogOpen:!s.state.isSetNameDialogOpen})},s.toggleSetContactEmailDialog=function(){s.setState({isSetContactEmailDialogOpen:!s.state.isSetContactEmailDialogOpen})},s.toggleSetQuotaDialog=function(){s.setState({isSetQuotaDialogOpen:!s.state.isSetQuotaDialogOpen})},s.state={isSetNameDialogOpen:!1,isSetContactEmailDialogOpen:!1,isSetQuotaDialogOpen:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.data,t=e.loading,r=e.errorMsg,n=e.avatar_url,s=e.email,a=e.contact_email,i=e.name,o=e.quota_total,l=e.quota_usage,d=this.state,h=d.isSetNameDialogOpen,u=d.isSetContactEmailDialogOpen,p=d.isSetQuotaDialogOpen;return t?Object(b.jsx)(q.a,{}):r?Object(b.jsx)("p",{className:"error text-center",children:r}):Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("dl",{children:[Object(b.jsx)("dt",{children:Object(j.rb)("Avatar")}),Object(b.jsx)("dd",{children:Object(b.jsx)("img",{src:n,width:"48",height:"48",className:"rounded",alt:""})}),Object(b.jsx)("dt",{children:"ID"}),Object(b.jsx)("dd",{children:s}),Object(b.jsx)("dt",{children:Object(j.rb)("Name")}),Object(b.jsxs)("dd",{children:[i||"--",Object(b.jsx)("span",{title:Object(j.rb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetNameDialog})]}),Object(b.jsx)("dt",{children:Object(j.rb)("Contact Email")}),Object(b.jsxs)("dd",{children:[a||"--",Object(b.jsx)("span",{title:Object(j.rb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetContactEmailDialog})]}),Object(b.jsx)("dt",{children:Object(j.rb)("Organization")}),Object(b.jsx)("dd",{children:W}),Object(b.jsx)("dt",{children:Object(j.rb)("Space Used / Quota")}),Object(b.jsxs)("dd",{children:["".concat(f.a.bytesToSize(l)).concat(o>0?" / "+f.a.bytesToSize(o):""),Object(b.jsx)("span",{title:Object(j.rb)("Edit"),className:"attr-action-icon fa fa-pencil-alt",onClick:this.toggleSetQuotaDialog})]})]}),h&&Object(b.jsx)(V,{orgID:K,email:s,name:i,updateName:this.props.updateName,toggleDialog:this.toggleSetNameDialog}),u&&Object(b.jsx)(Q,{orgID:K,email:s,contactEmail:a,updateContactEmail:this.props.updateContactEmail,toggleDialog:this.toggleSetContactEmailDialog}),p&&Object(b.jsx)(H,{orgID:K,email:s,quotaTotal:o,updateQuota:this.props.updateQuota,toggleDialog:this.toggleSetQuotaDialog})]})}}]),r}(c.Component),X=J,Z=r(140),ee=window.org.pageOptions.orgID,te=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).state={loading:!0,errorMsg:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetOrgUserOwnedRepos(ee,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(B,{email:this.props.email,currentItem:"owned-repos"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(re,{data:this.state})})]})})]})}}]),r}(c.Component),re=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.data,t=e.loading,r=e.errorMsg,n=e.repo_list;return t?Object(b.jsx)(q.a,{}):r?Object(b.jsx)("p",{className:"error text-center",children:r}):Object(b.jsx)(c.Fragment,{children:Object(b.jsxs)("table",{className:"table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"4%"}),Object(b.jsx)("th",{width:"35%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"16%",children:Object(j.rb)("Size")}),Object(b.jsx)("th",{width:"25%",children:Object(j.rb)("Last Update")}),Object(b.jsx)("th",{width:"20%"})]})}),Object(b.jsx)("tbody",{children:n.map((function(e,t){return Object(b.jsx)(ne,{data:e},t)}))})]})})}}]),r}(c.Component),ne=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleMouseOver=function(){s.setState({isOpIconShown:!0})},s.handleMouseOut=function(){s.setState({isOpIconShown:!1})},s.handleDeleteIconClick=function(e){e.preventDefault(),s.toggleDeleteRepoDialog()},s.toggleDeleteRepoDialog=function(){s.setState({isDeleteRepoDialogOpen:!s.state.isDeleteRepoDialogOpen})},s.deleteRepo=function(){var e=s.props.data;O.a.orgAdminDeleteOrgRepo(ee,e.repo_id).then((function(t){s.setState({deleted:!0,isRepoDeleted:!0});var r=Object(j.rb)("Successfully deleted {name}.").replace("{name}",e.repo_name);x.a.success(r)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t),s.setState({isRepoDeleted:!1})}))},s.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.state,t=e.deleted,r=e.isOpIconShown,n=e.isDeleteRepoDialogOpen,s=this.props.data;return t?null:Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:f.a.getLibIconUrl(s,!1),alt:f.a.getLibIconTitle(s),title:f.a.getLibIconTitle(s),width:"24"})}),Object(b.jsx)("td",{children:s.repo_name}),Object(b.jsx)("td",{children:f.a.bytesToSize(s.size)}),Object(b.jsx)("td",{title:A()(s.last_modified).format("LLLL"),children:A()(s.last_modified).format("YYYY-MM-DD")}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete".concat(r?"":" invisible"),title:Object(j.rb)("Delete"),onClick:this.handleDeleteIconClick})})]}),n&&Object(b.jsx)(Z.a,{repo:s,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog})]})}}]),r}(c.Component),se=te,ae=window.org.pageOptions.orgID,ie=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).state={loading:!0,errorMsg:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetOrgUserBesharedRepos(ae,this.props.email).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(B,{email:this.props.email,currentItem:"shared-repos"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(ce,{data:this.state})})]})})]})}}]),r}(c.Component),ce=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.data,t=e.loading,r=e.errorMsg,n=e.repo_list;return t?Object(b.jsx)(q.a,{}):r?Object(b.jsx)("p",{className:"error text-center",children:r}):Object(b.jsxs)("table",{className:"table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"4%"}),Object(b.jsx)("th",{width:"30%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"26%",children:Object(j.rb)("Owner")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Size")}),Object(b.jsx)("th",{width:"25%",children:Object(j.rb)("Last Update")})]})}),Object(b.jsx)("tbody",{children:n.map((function(e,t){return Object(b.jsx)(oe,{data:e},t)}))})]})}}]),r}(c.Component),oe=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.data;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:f.a.getLibIconUrl(e,!1),alt:f.a.getLibIconTitle(e),title:f.a.getLibIconTitle(e),width:"24"})}),Object(b.jsx)("td",{children:e.repo_name}),Object(b.jsx)("td",{children:e.owner_name}),Object(b.jsx)("td",{children:f.a.bytesToSize(e.size)}),Object(b.jsx)("td",{title:A()(e.last_modified).format("LLLL"),children:A()(e.last_modified).format("YYYY-MM-DD")})]})}}]),r}(c.Component),le=ie;A.a.locale(j.Fb);var de=function e(t){Object(n.a)(this,e),this.id=t.id,this.groupName=t.group_name,this.creatorName=t.creator_name,this.creatorEmail=t.creator_email,this.creatorContactEmail=t.creator_contact_email,this.ctime=A()(t.ctime).format("YYYY-MM-DD HH:mm:ss")},he=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleInputChange=function(e){s.setState({value:e.target.value})},s.handleKeyPress=function(e){"Enter"==e.key&&(e.preventDefault(),s.handleSubmit())},s.handleSubmit=function(){var e=s.state.value.trim();if(!e)return!1;s.props.submit(e)},s.state={value:""},s}return Object(s.a)(r,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:"input-icon",children:[Object(b.jsx)("i",{className:"d-flex input-icon-addon fas fa-search"}),Object(b.jsx)("input",{type:"text",className:"form-control search-input h-6 mr-1",style:{width:"15rem"},placeholder:this.props.placeholder,value:this.state.value,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoComplete:"off"})]})}}]),r}(o.a.Component),je=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).initData=function(e){O.a.orgAdminListOrgGroups(j.Vb,e).then((function(e){var t=e.data.groups.map((function(e){return new de(e)}));s.setState({orgGroups:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.onChangePageNum=function(e,t){e.preventDefault();var r=s.state.page;1==t?r+=1:r-=1,s.initData(r)},s.onFreezedItem=function(){s.setState({isItemFreezed:!0})},s.onUnfreezedItem=function(){s.setState({isItemFreezed:!1})},s.deleteGroupItem=function(e){O.a.orgAdminDeleteOrgGroup(j.Vb,e.id).then((function(t){s.setState({orgGroups:s.state.orgGroups.filter((function(t){return t.id!=e.id}))});var r=Object(j.rb)("Successfully deleted {name}");r=r.replace("{name}",e.groupName),x.a.success(r)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.searchItems=function(e){Object(h.c)("".concat(j.rc,"org/groupadmin/search-groups/?query=").concat(encodeURIComponent(e)))},s.getSearch=function(){return Object(b.jsx)(he,{placeholder:Object(j.rb)("Search groups by name"),submit:s.searchItems})},s.state={page:1,pageNext:!1,orgGroups:[],isItemFreezed:!1},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this.state.page;this.initData(e)}},{key:"render",value:function(){var e=this,t=this.state.orgGroups;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{search:this.getSearch()}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("All Groups")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"35%",children:Object(j.rb)("Creator")}),Object(b.jsx)("th",{width:"23%",children:Object(j.rb)("Created At")}),Object(b.jsx)("th",{width:"12%",className:"text-center",children:Object(j.rb)("Operations")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t){return Object(b.jsx)(ue,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.deleteGroupItem},t.id)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.rb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.rb)("Next")})]})]})]})})]})}}]),r}(c.Component),ue=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({showMenu:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({showMenu:!1,highlight:!1})},s.onDropdownToggleClick=function(e){e.preventDefault(),s.toggleOperationMenu(e)},s.toggleOperationMenu=function(e){e.stopPropagation(),s.setState({isItemMenuShow:!s.state.isItemMenuShow},(function(){s.state.isItemMenuShow?s.props.onFreezedItem():(s.setState({highlight:!1,showMenu:!1}),s.props.onUnfreezedItem())}))},s.toggleDelete=function(){s.props.deleteGroupItem(s.props.group)},s.renderGroupHref=function(e){return"system admin"==e.creatorName?j.rc+"org/departmentadmin/groups/"+e.id+"/":j.rc+"org/groupadmin/"+e.id+"/"},s.renderGroupCreator=function(e){var t=j.rc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?Object(b.jsx)("td",{children:" -- "}):Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},s.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),Object(b.jsx)("td",{children:e.ctime}),Object(b.jsx)("td",{className:"text-center cursor-pointer",children:t&&Object(b.jsxs)(m.i,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.l,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.rb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsx)(m.k,{children:Object(b.jsx)(m.j,{onClick:this.toggleDelete,children:Object(j.rb)("Delete")})})]})})]})}}]),r}(o.a.Component),be=je,pe=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({showMenu:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({showMenu:!1,highlight:!1})},s.onDropdownToggleClick=function(e){e.preventDefault(),s.toggleOperationMenu(e)},s.toggleOperationMenu=function(e){e.stopPropagation(),s.setState({isItemMenuShow:!s.state.isItemMenuShow},(function(){s.state.isItemMenuShow?s.props.onFreezedItem():(s.setState({highlight:!1,showMenu:!1}),s.props.onUnfreezedItem())}))},s.toggleDelete=function(){s.props.deleteGroupItem(s.props.group)},s.renderGroupHref=function(e){return"system admin"==e.creatorName?j.rc+"org/departmentadmin/groups/"+e.id+"/":j.rc+"org/groupadmin/"+e.id+"/"},s.renderGroupCreator=function(e){var t=j.rc+"org/useradmin/info/"+e.creatorEmail+"/";return"system admin"==e.creatorName?Object(b.jsx)("td",{children:" -- "}):Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:t,className:"font-weight-normal",children:e.creatorName})})},s.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.group,t="system admin"!=e.creatorName&&this.state.showMenu;return Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:this.renderGroupHref(e),className:"font-weight-normal",children:e.groupName})}),this.renderGroupCreator(e),Object(b.jsx)("td",{children:e.ctime}),Object(b.jsx)("td",{className:"text-center cursor-pointer",children:t&&Object(b.jsxs)(m.i,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.l,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.rb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsx)(m.k,{children:Object(b.jsx)(m.j,{onClick:this.toggleDelete,children:Object(j.rb)("Delete")})})]})})]})}}]),r}(o.a.Component),ge=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onFreezedItem=function(){s.setState({isItemFreezed:!0})},s.onUnfreezedItem=function(){s.setState({isItemFreezed:!1})},s.state={isItemFreezed:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=this.props.orgGroups;return Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"30%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"35%",children:Object(j.rb)("Creator")}),Object(b.jsx)("th",{width:"23%",children:Object(j.rb)("Created At")}),Object(b.jsx)("th",{width:"12%",className:"text-center",children:Object(j.rb)("Operations")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t){return Object(b.jsx)(pe,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteGroupItem:e.props.toggleDelete},t.id)}))})]})})}}]),r}(o.a.Component),me=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).getItems=function(){O.a.orgAdminSearchGroup(j.Vb,s.state.query.trim()).then((function(e){var t=e.data.group_list.map((function(e){return new de(e)}));s.setState({orgGroups:t,loading:!1})})).catch((function(e){s.setState({loading:!1,errorMsg:f.a.getErrorMsg(e,!0)})}))},s.deleteGroupItem=function(e){O.a.orgAdminDeleteOrgGroup(j.Vb,e.id).then((function(t){s.setState({orgGroups:s.state.orgGroups.filter((function(t){return t.id!=e.id}))});var r=Object(j.rb)("Successfully deleted {name}");r=r.replace("{name}",e.groupName),x.a.success(r)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.handleInputChange=function(e){s.setState({query:e.target.value},s.checkSubmitBtnActive)},s.checkSubmitBtnActive=function(){var e=s.state.query;s.setState({isSubmitBtnActive:e.trim()})},s.state={query:"",orgGroups:[],isSubmitBtnActive:!1,loading:!0,errorMsg:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=new URL(document.location).searchParams;this.setState({query:t.get("query")||""},(function(){e.getItems()}))}},{key:"render",value:function(){var e=this.state,t=e.query,r=e.isSubmitBtnActive;return Object(b.jsx)(c.Fragment,{children:Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("Groups")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("div",{className:"mt-4 mb-6",children:[Object(b.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.rb)("Search Groups")}),Object(b.jsxs)(m.m,{children:[Object(b.jsx)(m.n,{row:!0,children:Object(b.jsx)(m.f,{sm:5,children:Object(b.jsx)(m.p,{type:"text",name:"query",value:t,placeholder:Object(j.rb)("Search groups"),onChange:this.handleInputChange})})}),Object(b.jsx)(m.n,{row:!0,children:Object(b.jsx)(m.f,{sm:{size:5},children:Object(b.jsx)("button",{className:"btn btn-outline-primary",disabled:!r,onClick:this.getItems,children:Object(j.rb)("Submit")})})})]})]}),Object(b.jsxs)("div",{className:"mt-4 mb-6",children:[Object(b.jsx)("h4",{className:"border-bottom font-weight-normal mb-2 pb-1",children:Object(j.rb)("Result")}),Object(b.jsx)(ge,{toggleDelete:this.deleteGroupItem,orgGroups:this.state.orgGroups})]})]})]})})})}}]),r}(c.Component),Oe=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props,t=e.groupID,r=e.currentItem,n="".concat(j.rc,"org/groupadmin/").concat(t,"/");return Object(b.jsx)("div",{className:"cur-view-path org-admin-user-nav",children:Object(b.jsxs)("ul",{className:"nav",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:n,className:"nav-link".concat("info"==r?" active":""),children:Object(j.rb)("Group Info")})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(n,"repos/"),className:"nav-link".concat("repos"==r?" active":""),children:Object(j.rb)("Libraries")})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(h.a,{to:"".concat(n,"members/"),className:"nav-link".concat("members"==r?" active":""),children:Object(j.rb)("Members")})})]})})}}]),r}(o.a.Component),fe=window.org.pageOptions.orgID,xe=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).state={loading:!0,errorMsg:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetGroup(fe,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(Oe,{groupID:this.props.groupID,currentItem:"info"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(ve,{data:this.state})})]})})]})}}]),r}(c.Component),ve=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).state={},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.data,t=e.loading,r=e.errorMsg,n=e.group_name,s=e.creator_email,a=e.creator_name;return t?Object(b.jsx)(q.a,{}):r?Object(b.jsx)("p",{className:"error text-center mt-2",children:r}):Object(b.jsxs)("dl",{children:[Object(b.jsx)("dt",{children:Object(j.rb)("Name")}),Object(b.jsx)("dd",{children:n}),Object(b.jsx)("dt",{children:Object(j.rb)("Creator")}),Object(b.jsx)("dd",{children:Object(b.jsx)(h.a,{to:"".concat(j.rc,"org/useradmin/info/").concat(encodeURIComponent(s),"/"),children:a})})]})}}]),r}(c.Component),we=xe,De=window.org.pageOptions.orgID,Se=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).state={loading:!0,errorMsg:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminListGroupRepos(De,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(Oe,{groupID:this.props.groupID,currentItem:"repos"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(Ne,{data:this.state})})]})})]})}}]),r}(c.Component),Ne=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.data,t=e.loading,r=e.errorMsg,n=e.libraries;return t?Object(b.jsx)(q.a,{}):r?Object(b.jsx)("p",{className:"error text-center mt-2",children:r}):Object(b.jsx)(c.Fragment,{children:Object(b.jsxs)("table",{className:"table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"4%"}),Object(b.jsx)("th",{width:"35%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"20%",children:Object(j.rb)("Size")}),Object(b.jsx)("th",{width:"26%",children:Object(j.rb)("Shared By")}),Object(b.jsx)("th",{width:"15%"})]})}),Object(b.jsx)("tbody",{children:n.map((function(e,t){return Object(b.jsx)(Ie,{data:e},t)}))})]})})}}]),r}(c.Component),Ie=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleMouseOver=function(){s.setState({isOpIconShown:!0})},s.handleMouseOut=function(){s.setState({isOpIconShown:!1})},s.handleDeleteIconClick=function(e){e.preventDefault(),s.toggleDeleteRepoDialog()},s.toggleDeleteRepoDialog=function(){s.setState({isDeleteRepoDialogOpen:!s.state.isDeleteRepoDialogOpen})},s.deleteRepo=function(){var e=s.props.data;O.a.orgAdminDeleteOrgRepo(De,e.repo_id).then((function(t){s.setState({deleted:!0,isRepoDeleted:!0});var r=Object(j.rb)("Successfully deleted {name}.").replace("{name}",e.name);x.a.success(r)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t),s.setState({isRepoDeleted:!1})}))},s.state={isOpIconShown:!1,deleted:!1,isDeleteRepoDialogOpen:!1,isRepoDeleted:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.state,t=e.deleted,r=e.isOpIconShown,n=e.isDeleteRepoDialogOpen,s=this.props.data;return t?null:Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("tr",{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:f.a.getLibIconUrl(s,!1),alt:f.a.getLibIconTitle(s),title:f.a.getLibIconTitle(s),width:"24"})}),Object(b.jsx)("td",{children:s.name}),Object(b.jsx)("td",{children:f.a.bytesToSize(s.size)}),Object(b.jsx)("td",{children:Object(b.jsx)(h.a,{to:"".concat(j.rc,"org/useradmin/info/").concat(encodeURIComponent(s.shared_by),"/"),children:s.shared_by_name})}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:"#",className:"action-icon sf2-icon-delete".concat(r?"":" invisible"),title:Object(j.rb)("Delete"),onClick:this.handleDeleteIconClick})})]}),n&&Object(b.jsx)(Z.a,{repo:s,isRepoDeleted:this.state.isRepoDeleted,onDeleteRepo:this.deleteRepo,toggle:this.toggleDeleteRepoDialog})]})}}]),r}(c.Component),Ce=Se,Me=window.org.pageOptions.orgID,ye=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).state={loading:!0,errorMsg:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminListGroupMembers(Me,this.props.groupID).then((function(t){e.setState(Object.assign({loading:!1},t.data))})).catch((function(t){e.setState({loading:!1,errorMsg:f.a.getErrorMsg(t,!0)})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)(Oe,{groupID:this.props.groupID,currentItem:"members"}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsx)(ke,{data:this.state})})]})})]})}}]),r}(c.Component),ke=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.data,t=e.loading,r=e.errorMsg,n=e.members;return t?Object(b.jsx)(q.a,{}):r?Object(b.jsx)("p",{className:"error text-center mt-2",children:r}):Object(b.jsx)(c.Fragment,{children:Object(b.jsxs)("table",{className:"table-hover",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"10%"}),Object(b.jsx)("th",{width:"50%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"40%",children:Object(j.rb)("Role")})]})}),Object(b.jsx)("tbody",{children:n.map((function(e,t){return Object(b.jsx)(_e,{data:e},t)}))})]})})}}]),r}(c.Component),_e=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(s.a)(r,[{key:"getRoleText",value:function(){switch(this.props.data.role){case"Owner":return Object(j.rb)("Owner");case"Admin":return Object(j.rb)("Admin");case"Member":return Object(j.rb)("Member")}}},{key:"render",value:function(){var e=this.props.data;return Object(b.jsx)(c.Fragment,{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"text-center",children:Object(b.jsx)("img",{src:e.avatar_url,alt:"",className:"avatar",width:"32"})}),Object(b.jsx)("td",{children:Object(b.jsx)(h.a,{to:"".concat(j.rc,"org/useradmin/info/").concat(encodeURIComponent(e.email),"/"),children:e.name})}),Object(b.jsx)("td",{children:this.getRoleText()})]})})}}]),r}(c.Component),Ae=ye,ze=function e(t){Object(n.a)(this,e),this.repoID=t.repo_id,this.repoName=t.repo_name,this.ownerName=t.owner_name,this.ownerEmail=t.owner_email,this.size=t.size,this.file_count=t.file_count,this.encrypted=t.encrypted,this.isDepartmentRepo=t.is_department_repo,this.groupID=t.group_id},Re=r(172),Ue=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).listRepos=function(e){O.a.orgAdminListOrgRepos(j.Vb,e,s.state.sortBy).then((function(e){var t=e.data.repo_list.map((function(e){return new ze(e)}));s.setState({orgRepos:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.onChangePageNum=function(e,t){e.preventDefault();var r=s.state.page;1==t?r+=1:r-=1,s.listRepos(r)},s.onFreezedItem=function(){s.setState({isItemFreezed:!0})},s.onUnfreezedItem=function(){s.setState({isItemFreezed:!1})},s.deleteRepoItem=function(e){O.a.orgAdminDeleteOrgRepo(j.Vb,e.repoID).then((function(t){s.setState({orgRepos:s.state.orgRepos.filter((function(t){return t.repoID!=e.repoID}))});var r=Object(j.rb)("Successfully deleted {name}");r=r.replace("{name}",e.repoName),x.a.success(r)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.transferRepoItem=function(e,t){s.setState({orgRepos:s.state.orgRepos.map((function(r){return r.repoID==e&&(r.ownerEmail=t.email,r.ownerName=t.value),r}))})},s.sortItems=function(e){s.setState({page:1,sortBy:e},(function(){var e=new URL(location.href),t=new URLSearchParams(e.search),r=s.state,n=r.page,a=r.sortBy;t.set("page",n),t.set("order_by",a),e.search=t.toString(),Object(h.c)(e.toString()),s.listRepos(n)}))},s.sortByFileCount=function(e){e.preventDefault(),s.sortItems("file_count")},s.sortBySize=function(e){e.preventDefault(),s.sortItems("size")},s.state={page:1,pageNext:!1,orgRepos:[],sortBy:"",isItemFreezed:!1},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location).searchParams,r=this.state,n=r.page,s=r.sortBy;this.setState({sortBy:t.get("order_by")||s,page:parseInt(t.get("page")||n)},(function(){e.listRepos(e.state.page)}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.orgRepos,n=t.sortBy,s=Object(b.jsx)("span",{className:"fas fa-sort"}),a=Object(b.jsx)("span",{className:"fas fa-caret-down"});return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("All Libraries")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"5%"}),Object(b.jsx)("th",{width:"25%",children:Object(j.rb)("Name")}),Object(b.jsxs)("th",{width:"15%",children:[Object(b.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortByFileCount,children:[Object(j.rb)("Files")," ","file_count"==n?a:s]})," / ",Object(b.jsxs)("a",{className:"d-inline-block table-sort-op",href:"#",onClick:this.sortBySize,children:[Object(j.rb)("Size")," ","size"==n?a:s]})]}),Object(b.jsx)("th",{width:"32%",children:"ID"}),Object(b.jsx)("th",{width:"18%",children:Object(j.rb)("Owner")}),Object(b.jsx)("th",{width:"5%"})]})}),Object(b.jsx)("tbody",{children:r.map((function(t){return Object(b.jsx)(Fe,{repo:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteRepoItem:e.deleteRepoItem,transferRepoItem:e.transferRepoItem},t.repoID)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.rb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.rb)("Next")})]})]})]})})]})}}]),r}(c.Component),Fe=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({showMenu:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({showMenu:!1,highlight:!1})},s.onDropdownToggleClick=function(e){e.preventDefault(),s.toggleOperationMenu(e)},s.toggleOperationMenu=function(e){e.stopPropagation(),s.setState({isItemMenuShow:!s.state.isItemMenuShow},(function(){s.state.isItemMenuShow?s.props.onFreezedItem():(s.setState({highlight:!1,showMenu:!1}),s.props.onUnfreezedItem())}))},s.toggleDelete=function(){s.props.deleteRepoItem(s.props.repo)},s.toggleTransfer=function(){s.props.transferRepoItem(s.props.repo)},s.renderLibIcon=function(e){var t,r;return e.encrypted?(t=j.Pb+"img/lib/48/lib-encrypted.png",r=Object(j.rb)("Encrypted library")):(t=j.Pb+"img/lib/48/lib.png",r=Object(j.rb)("Read-Write library")),Object(b.jsx)("img",{src:t,title:r,alt:r,width:"24"})},s.renderRepoOwnerHref=function(e){return e.isDepartmentRepo?j.rc+"org/admin/#address-book/groups/"+e.groupID+"/":j.rc+"org/useradmin/info/"+e.ownerEmail+"/"},s.toggleTransfer=function(){s.setState({isTransferDialogShow:!s.state.isTransferDialogShow})},s.onTransferRepo=function(e){var t=s.props.repo;O.a.orgAdminTransferOrgRepo(j.Vb,t.repoID,e.email).then((function(r){s.props.transferRepoItem(t.repoID,e);var n=Object(j.rb)("Successfully transferred the library.");x.a.success(n)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)})),s.toggleTransfer()},s.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,isTransferDialogShow:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.repo,t=this.state.showMenu&&!e.isDepartmentRepo;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:this.renderLibIcon(e)}),Object(b.jsx)("td",{children:e.repoName}),Object(b.jsx)("td",{children:"".concat(e.file_count," / ").concat(f.a.bytesToSize(e.size))}),Object(b.jsx)("td",{children:e.repoID}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:this.renderRepoOwnerHref(e),children:e.ownerName})}),Object(b.jsx)("td",{className:"text-center cursor-pointer",children:t&&Object(b.jsxs)(m.i,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.l,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.rb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsxs)(m.k,{children:[Object(b.jsx)(m.j,{onClick:this.toggleDelete,children:Object(j.rb)("Delete")}),Object(b.jsx)(m.j,{onClick:this.toggleTransfer,children:Object(j.rb)("Transfer")})]})]})})]}),this.state.isTransferDialogShow&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Re.a,{itemName:e.repoName,submit:this.onTransferRepo,toggleDialog:this.toggleTransfer})})]})}}]),r}(o.a.Component),Le=Ue,Ee=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).state={org_name:"",storage_quota:0,storage_usage:0,member_quota:0,member_usage:0,active_members:0},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetOrgInfo().then((function(t){e.setState({org_name:t.data.org_name,storage_quota:t.data.storage_quota,storage_usage:t.data.storage_usage,member_quota:t.data.member_quota,member_usage:t.data.member_usage,active_members:t.data.active_members})}))}},{key:"render",value:function(){return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("Info")})}),Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("dl",{children:[Object(b.jsx)("strong",{children:this.state.org_name}),Object(b.jsx)("dt",{children:Object(j.rb)("Space Used")}),this.state.storage_quota>0?Object(b.jsxs)("dd",{children:[f.a.bytesToSize(this.state.storage_usage)," / ",f.a.bytesToSize(this.state.storage_quota)]}):Object(b.jsx)("dd",{children:f.a.bytesToSize(this.state.storage_usage)}),j.Wb?Object(b.jsxs)("dt",{children:[Object(j.rb)("Active Users")," / ",Object(j.rb)("Total Users")," / ",Object(j.rb)("Limits")]}):Object(b.jsxs)("dt",{children:[Object(j.rb)("Active Users")," / ",Object(j.rb)("Total Users")]}),j.Wb?Object(b.jsxs)("dd",{children:[this.state.active_members>0?this.state.active_members:"--"," / ",this.state.member_usage>0?this.state.member_usage:"--"," / ",this.state.member_quota>0?this.state.member_quota:"--"]}):Object(b.jsxs)("dd",{children:[this.state.active_members>0?this.state.active_members:"--"," / ",this.state.member_usage>0?this.state.member_usage:"--"]})]})})]})})]})}}]),r}(c.Component),Pe=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).copyToClipBoard=function(){Object(y.a)(s.props.currentLinkHref);var e=Object(j.rb)("Link has been copied to clipboard");x.a.success(e),s.props.toggle()},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.currentLinkHref;return Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:Object(j.rb)("Link")}),Object(b.jsx)(m.v,{children:Object(b.jsx)("p",{children:Object(b.jsx)("a",{target:"_blank",href:e,children:e})})}),Object(b.jsxs)(m.w,{children:[Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.rb)("Cancel")})," ",Object(b.jsx)(m.c,{color:"primary",onClick:this.copyToClipBoard,children:Object(j.rb)("Copy")})]})]})}}]),r}(o.a.Component),Ge=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).listOrgLinks=function(e){O.a.orgAdminListOrgLinks(s.state.page).then((function(e){var t=e.data;s.setState({linkList:t.link_list,page:t.page,pageNext:t.page_next})}))},s.onFreezedItem=function(){s.setState({isItemFreezed:!0})},s.onUnfreezedItem=function(){s.setState({isItemFreezed:!1})},s.onChangePageNum=function(e,t){e.preventDefault();var r=s.state.page;1==t?r+=1:r-=1,s.listOrgLinks(r)},s.deleteOrgLink=function(e){O.a.orgAdminDeleteOrgLink(e).then((function(e){!0===e.data.success&&s.listOrgLinks(s.state.page)})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.openLinkDialog=function(e){var t;t=e.name.indexOf("/")>-1?j.gc+"/d/"+e.token+"/":j.gc+"/f/"+e.token+"/",s.setState({currentLinkHref:t}),s.toggleLinkDialog()},s.toggleLinkDialog=function(){s.setState({isShowLinkDialog:!s.state.isShowLinkDialog})},s.state={linkList:null,page:1,pageNext:!1,isItemFreezed:!1,isShowLinkDialog:!1,currentLinkHref:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.listOrgLinks(this.state.page)}},{key:"render",value:function(){var e=this,t=this.state.linkList;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("All Public Links")})}),Object(b.jsxs)("div",{className:"cur-view-content",children:[Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"50%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Owner")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Created At")}),Object(b.jsx)("th",{width:"10%",children:Object(j.rb)("Count")}),Object(b.jsx)("th",{width:"10%"})]})}),Object(b.jsx)("tbody",{children:t&&t.map((function(t,r){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(Te,{link:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,deleteOrgLink:e.deleteOrgLink,openLinkDialog:e.openLinkDialog})},r)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.rb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.rb)("Next")})]})]})]})}),this.state.isShowLinkDialog&&Object(b.jsx)(Pe,{currentLinkHref:this.state.currentLinkHref,toggle:this.toggleLinkDialog})]})}}]),r}(o.a.Component),Te=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({showMenu:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({showMenu:!1,highlight:!1})},s.onDropdownToggleClick=function(e){e.preventDefault(),s.toggleOperationMenu(e)},s.toggleOperationMenu=function(e){e.stopPropagation(),s.setState({isItemMenuShow:!s.state.isItemMenuShow},(function(){s.state.isItemMenuShow?s.props.onFreezedItem():(s.setState({highlight:!1,showMenu:!1}),s.props.onUnfreezedItem())}))},s.state={highlight:!1,showMenu:!1,isItemMenuShow:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props,t=e.link,r=e.deleteOrgLink,n=j.rc+"org/useradmin/info/"+encodeURIComponent(t.owner_email)+"/";return Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:t.name}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:n,children:t.owner_name})}),Object(b.jsx)("td",{children:A()(t.created_time).fromNow()}),Object(b.jsx)("td",{children:t.view_count}),Object(b.jsx)("td",{className:"cursor-pointer text-center",children:this.state.showMenu&&Object(b.jsxs)(m.i,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(b.jsx)(m.l,{tag:"a",className:"attr-action-icon fas fa-ellipsis-v",title:Object(j.rb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow,onClick:this.onDropdownToggleClick}),Object(b.jsxs)(m.k,{children:[Object(b.jsx)(m.j,{onClick:r.bind(this,t.token),children:Object(j.rb)("Delete")}),Object(b.jsx)(m.j,{onClick:this.props.openLinkDialog.bind(this,t),children:Object(j.rb)("View Link")})]})]})})]})}}]),r}(o.a.Component),qe=Ge,Be=(r(191),function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(s.a)(r,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"h-100 org-departments",children:this.props.children})}}]),r}(o.a.Component)),Ve=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleSubmit=function(){if(s.validateName()){var e=-1;s.props.parentGroupID&&(e=s.props.parentGroupID),O.a.orgAdminAddDepartGroup(j.Vb,e,s.state.departName.trim()).then((function(e){s.props.toggle(),s.props.onDepartChanged()})).catch((function(e){var t=Object(j.rb)(e.response.data.error_msg);s.setState({errMessage:t})}))}},s.validateName=function(){var e="";return!!s.state.departName.trim().length||(e=Object(j.rb)("Name is required"),s.setState({errMessage:e}),!1)},s.handleChange=function(e){s.setState({departName:e.target.value})},s.handleKeyPress=function(e){"Enter"===e.key&&(s.handleSubmit(),e.preventDefault())},s.state={departName:"",errMessage:""},s.newInput=o.a.createRef(),s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this,t=this.props.parentGroupID?Object(j.rb)("New Sub-department"):Object(j.rb)("New Department");return Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:t}),Object(b.jsxs)(m.v,{children:[Object(b.jsx)(m.m,{children:Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.t,{for:"departName",children:Object(j.rb)("Name")}),Object(b.jsx)(m.p,{id:"departName",onKeyPress:this.handleKeyPress,value:this.state.departName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}})]})}),this.state.errMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(b.jsx)(m.w,{children:Object(b.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(j.rb)("Submit")})})]})}}]),r}(o.a.Component),Qe=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).deleteDepart=function(){s.props.toggle(),O.a.orgAdminDeleteDepartGroup(j.Vb,s.props.groupID).then((function(e){s.props.onDepartChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s}return Object(s.a)(r,[{key:"render",value:function(){var e=Object(j.rb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+f.a.HTMLescape(this.props.groupName)+"</span>"),Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:Object(j.rb)("Delete Department")}),Object(b.jsx)(m.v,{children:Object(b.jsx)("p",{dangerouslySetInnerHTML:{__html:e}})}),Object(b.jsxs)(m.w,{children:[Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.rb)("Cancel")}),Object(b.jsx)(m.c,{color:"primary",onClick:this.deleteDepart,children:Object(j.rb)("Delete")})]})]})}}]),r}(o.a.Component),He=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).setGroupQuota=function(){var e=s.state.quota;if(e.length&&/^[1-9]\d*$/im.test(e)||-2==e){s.setState({errMessage:""});var t=-2==s.state.quota?s.state.quota:1e6*s.state.quota;O.a.orgAdminSetGroupQuota(j.Vb,s.props.groupID,t).then((function(e){s.props.toggle(),s.props.onDepartChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}else{var r=Object(j.rb)("Quota is invalid.");s.setState({errMessage:r})}},s.handleChange=function(e){var t=e.target.value.trim();s.setState({quota:t})},s.handleKeyPress=function(e){"Enter"===e.key&&(s.setGroupQuota(),e.preventDefault())},s.state={quota:"",errMessage:""},s.newInput=o.a.createRef(),s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:Object(j.rb)("Set Quota")}),Object(b.jsxs)(m.v,{children:[Object(b.jsxs)(m.q,{children:[Object(b.jsx)(m.p,{onKeyPress:this.handleKeyPress,value:this.state.quota,onChange:this.handleChange,innerRef:function(t){e.newInput=t}}),Object(b.jsx)(m.r,{addonType:"append",children:"MB"})]}),Object(b.jsxs)("p",{className:"tip",children:[Object(b.jsx)("br",{}),Object(b.jsx)("span",{children:Object(j.rb)("An integer that is greater than 0 or equal to -2.")}),Object(b.jsx)("br",{}),Object(b.jsx)("span",{children:Object(j.rb)("Tip: -2 means no limit.")})]}),this.state.errMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(b.jsx)(m.w,{children:Object(b.jsx)(m.c,{color:"primary",onClick:this.setGroupQuota,children:Object(j.rb)("Submit")})})]})}}]),r}(o.a.Component),Ye=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleSubmit=function(){var e=s.validateName(),t=s.props,r=t.orgID,n=t.groupID;e&&O.a.orgAdminUpdateDepartGroup(r,n,s.state.departmentName.trim()).then((function(e){s.props.toggle(),s.props.onDepartmentNameChanged(e.data),x.a.success(Object(j.rb)("Success"))})).catch((function(e){var t=f.a.getErrorMsg(e);s.setState({errMessage:t})}))},s.validateName=function(){var e="";return!!s.state.departmentName.trim().length||(e=Object(j.rb)("Name is required"),s.setState({errMessage:e}),!1)},s.handleChange=function(e){s.setState({departmentName:e.target.value})},s.handleKeyPress=function(e){"Enter"===e.key&&(s.handleSubmit(),e.preventDefault())},s.state={departmentName:s.props.name,errMessage:""},s.newInput=o.a.createRef(),s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.newInput.select(),this.newInput.focus()}},{key:"render",value:function(){var e=this,t=Object(j.rb)("Rename Department");return Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:t}),Object(b.jsxs)(m.v,{children:[Object(b.jsx)(m.m,{children:Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.t,{for:"departmentName",children:Object(j.rb)("Name")}),Object(b.jsx)(m.p,{id:"departmentName",onKeyPress:this.handleKeyPress,value:this.state.departmentName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}})]})}),this.state.errMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(b.jsx)(m.w,{children:Object(b.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(j.rb)("Submit")})})]})}}]),r}(o.a.Component),Ke=r(46);A.a.locale(j.Fb);var We=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).listDepartGroups=function(){O.a.orgAdminListDepartGroups(j.Vb).then((function(e){s.setState({groups:e.data.data})}))},s.onFreezedItem=function(){s.setState({isItemFreezed:!0})},s.onUnfreezedItem=function(){s.setState({isItemFreezed:!1})},s.onDepartmentNameChanged=function(e){s.setState({groups:s.state.groups.map((function(t){return t.id==e.id&&(t.name=e.name),t}))})},s.showDeleteDepartDialog=function(e){s.setState({showDeleteDepartDialog:!0,groupID:e.id,groupName:e.name})},s.showSetGroupQuotaDialog=function(e){s.setState({showSetGroupQuotaDialog:!0,groupID:e})},s.toggleAddDepartDialog=function(){s.setState({isShowAddDepartDialog:!s.state.isShowAddDepartDialog})},s.toggleCancel=function(){s.setState({showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},s.onDepartChanged=function(){s.listDepartGroups()},s.state={groups:null,groupID:"",groupName:"",showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1,isShowAddDepartDialog:!1,isItemFreezed:!1},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.listDepartGroups()}},{key:"render",value:function(){var e=this,t=this.state.groups,r=Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)("button",{className:"btn btn-secondary operation-item",title:Object(j.rb)("New Department"),onClick:this.toggleAddDepartDialog,children:Object(j.rb)("New Department")}),this.state.isShowAddDepartDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Ve,{onDepartChanged:this.onDepartChanged,groupID:this.state.groupID,toggle:this.toggleAddDepartDialog})})]});return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{children:r}),Object(b.jsx)("div",{className:"main-panel-center flex-row h-100",children:Object(b.jsxs)("div",{className:"cur-view-container o-auto",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("Departments")})})}),Object(b.jsx)("div",{className:"cur-view-content",children:t&&t.length>0?Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"40%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"25%",children:Object(j.rb)("Created At")}),Object(b.jsx)("th",{width:"20%",children:Object(j.rb)("Quota")}),Object(b.jsx)("th",{width:"15%"})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,r){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(Je,{group:t,isItemFreezed:e.state.isItemFreezed,onFreezedItem:e.onFreezedItem,onUnfreezedItem:e.onUnfreezedItem,onDepartmentNameChanged:e.onDepartmentNameChanged,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog})},t.id)}))})]}):Object(b.jsx)("p",{className:"no-group",children:Object(j.rb)("No departments")})}),Object(b.jsxs)(o.a.Fragment,{children:[this.state.showDeleteDepartDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Qe,{toggle:this.toggleCancel,groupID:this.state.groupID,groupName:this.state.groupName,onDepartChanged:this.onDepartChanged})}),this.state.showSetGroupQuotaDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(He,{toggle:this.toggleCancel,groupID:this.state.groupID,onDepartChanged:this.onDepartChanged})})]})]})})]})}}]),r}(o.a.Component),Je=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({isOpIconShown:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({isOpIconShown:!1,highlight:!1})},s.translateOperations=function(e){var t="";switch(e){case"Rename":t=Object(j.rb)("Rename");break;case"Delete":t=Object(j.rb)("Delete")}return t},s.onMenuItemClick=function(e){var t=s.props.group;switch(e){case"Rename":s.toggleRenameDialog();break;case"Delete":s.props.showDeleteDepartDialog(t)}},s.onUnfreezedItem=function(){s.setState({highlight:!1,isOpIconShow:!1}),s.props.onUnfreezedItem()},s.toggleRenameDialog=function(){s.setState({isRenameDialogOpen:!s.state.isRenameDialogOpen})},s.state={highlight:!1,isOpIconShown:!1,isRenameDialogOpen:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.group,t=this.state,r=t.highlight,n=t.isOpIconShown,s=t.isRenameDialogOpen,a=j.rc+"org/departmentadmin/groups/"+e.id+"/";return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("tr",{className:r?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)(h.a,{to:a,children:e.name})}),Object(b.jsx)("td",{children:A()(e.created_at).fromNow()}),Object(b.jsxs)("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id),children:[f.a.bytesToSize(e.quota)," ",Object(b.jsx)("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon ".concat(r?"":"vh")})]}),Object(b.jsx)("td",{children:n&&Object(b.jsx)(Ke.a,{operations:["Rename","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),s&&Object(b.jsx)(Ye,{orgID:j.Vb,groupID:e.id,name:e.name,toggle:this.toggleRenameDialog,onDepartmentNameChanged:this.props.onDepartmentNameChanged})]})}}]),r}(o.a.Component),$e=We,Xe=r(232),Ze=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleSelectChange=function(e){s.setState({selectedOption:e}),s.Options=[]},s.handleSubmit=function(){if(s.state.selectedOption){var e=s.state.selectedOption.email;s.refs.orgSelect.clearSelect(),s.setState({errMessage:[]}),O.a.orgAdminAddGroupMember(j.Vb,s.props.groupID,e).then((function(e){s.setState({selectedOption:null}),e.data.failed.length>0&&s.setState({errMessage:e.data.failed[0].error_msg}),e.data.success.length>0&&(s.props.onMemberChanged(),s.props.toggle())})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}},s.state={selectedOption:null,errMessage:""},s.Options=[],s}return Object(s.a)(r,[{key:"render",value:function(){return Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:Object(j.rb)("Add Member")}),Object(b.jsxs)(m.v,{children:[Object(b.jsx)(P.a,{placeholder:Object(j.rb)("Search users..."),onSelectChange:this.handleSelectChange,ref:"orgSelect",isMulti:!1,className:"org-add-member-select"}),this.state.errMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(b.jsxs)(m.w,{children:[Object(b.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(j.rb)("Submit")}),Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.rb)("Cancel")})]})]})}}]),r}(o.a.Component),et=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).deleteMember=function(){var e=s.props.member.email;O.a.orgAdminDeleteGroupMember(j.Vb,s.props.groupID,e).then((function(e){e.data.success&&(s.props.onMemberChanged(),s.props.toggle())})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s}return Object(s.a)(r,[{key:"render",value:function(){var e=Object(j.rb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+f.a.HTMLescape(this.props.member.name)+"</span>"),Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:Object(j.rb)("Delete Member")}),Object(b.jsx)(m.v,{children:Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),Object(b.jsxs)(m.w,{children:[Object(b.jsx)(m.c,{color:"primary",onClick:this.deleteMember,children:Object(j.rb)("Delete")}),Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.rb)("Cancel")})]})]})}}]),r}(o.a.Component),tt=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).handleSubmit=function(){s.validateName()&&O.a.orgAdminAddDepartmentRepo(j.Vb,s.props.groupID,s.state.repoName.trim()).then((function(e){s.props.toggle(),s.props.onRepoChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);s.setState({errMessage:t})}))},s.validateName=function(){var e="";return!!s.state.repoName.trim().length||(e=Object(j.rb)("Name is required"),s.setState({errMessage:e}),!1)},s.handleChange=function(e){s.setState({repoName:e.target.value})},s.handleKeyPress=function(e){"Enter"===e.key&&(s.handleSubmit(),e.preventDefault())},s.state={repoName:"",errMessage:""},s.newInput=o.a.createRef(),s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.newInput.focus(),this.newInput.setSelectionRange(0,0)}},{key:"render",value:function(){var e=this;return Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:Object(j.rb)("New Library")}),Object(b.jsxs)(m.v,{children:[Object(b.jsx)(m.m,{children:Object(b.jsxs)(m.n,{children:[Object(b.jsx)(m.t,{for:"repoName",children:Object(j.rb)("Name")}),Object(b.jsx)(m.p,{id:"repoName",onKeyPress:this.handleKeyPress,value:this.state.repoName,onChange:this.handleChange,innerRef:function(t){e.newInput=t}})]})}),this.state.errMessage&&Object(b.jsx)("p",{className:"error",children:this.state.errMessage})]}),Object(b.jsx)(m.w,{children:Object(b.jsx)(m.c,{color:"primary",onClick:this.handleSubmit,children:Object(j.rb)("Submit")})})]})}}]),r}(o.a.Component),rt=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).deleteRepo=function(){O.a.orgAdminDeleteDepartmentRepo(j.Vb,s.props.groupID,s.props.repo.repo_id).then((function(e){e.data.success&&(s.props.onRepoChanged(),s.props.toggle())})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s}return Object(s.a)(r,[{key:"render",value:function(){var e=Object(j.rb)("Are you sure you want to delete {placeholder} ?");return e=e.replace("{placeholder}",'<span class="op-target">'+f.a.HTMLescape(this.props.repo.name)+"</span>"),Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggle,children:[Object(b.jsx)(m.x,{toggle:this.props.toggle,children:Object(j.rb)("Delete Library")}),Object(b.jsx)(m.v,{children:Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})}),Object(b.jsxs)(m.w,{children:[Object(b.jsx)(m.c,{color:"primary",onClick:this.deleteRepo,children:Object(j.rb)("Delete")}),Object(b.jsx)(m.c,{color:"secondary",onClick:this.props.toggle,children:Object(j.rb)("Cancel")})]})]})}}]),r}(o.a.Component);A.a.locale(j.Fb);var nt=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).listOrgGroupRepo=function(e){O.a.orgAdminListGroupRepos(j.Vb,e).then((function(e){s.setState({repos:e.data.libraries})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.listOrgMembers=function(e){O.a.orgAdminListGroupInfo(j.Vb,e,!0).then((function(e){s.setState({members:e.data.members,groups:e.data.groups,ancestorGroups:e.data.ancestor_groups,groupName:e.data.name})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.listSubDepartGroups=function(e){O.a.orgAdminListGroupInfo(j.Vb,e,!0).then((function(e){s.setState({groups:e.data.groups})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.toggleCancel=function(){s.setState({showDeleteMemberDialog:!1,showDeleteRepoDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1})},s.onFreezedDepart=function(){s.setState({isDepartFreezed:!0})},s.onUnfreezedDepart=function(){s.setState({isDepartFreezed:!1})},s.onDepartmentNameChanged=function(e){s.setState({groups:s.state.groups.map((function(t){return t.id==e.id&&(t.name=e.name),t}))})},s.onSubDepartChanged=function(){s.listSubDepartGroups(s.props.groupID)},s.onRepoChanged=function(){s.listOrgGroupRepo(s.props.groupID)},s.onMemberChanged=function(){s.listOrgMembers(s.props.groupID)},s.toggleItemFreezed=function(e){s.setState({isItemFreezed:e})},s.showDeleteMemberDialog=function(e){s.setState({showDeleteMemberDialog:!0,deletedMember:e})},s.showDeleteRepoDialog=function(e){s.setState({showDeleteRepoDialog:!0,deletedRepo:e})},s.toggleAddRepoDialog=function(){s.setState({isShowAddRepoDialog:!s.state.isShowAddRepoDialog})},s.toggleAddMemberDialog=function(){s.setState({isShowAddMemberDialog:!s.state.isShowAddMemberDialog})},s.toggleAddDepartDialog=function(){s.setState({isShowAddDepartDialog:!s.state.isShowAddDepartDialog})},s.showDeleteDepartDialog=function(e){s.setState({showDeleteDepartDialog:!0,subGroupID:e.id,subGroupName:e.name})},s.showSetGroupQuotaDialog=function(e){s.setState({showSetGroupQuotaDialog:!0,subGroupID:e})},s.state={groupName:"",isItemFreezed:!1,isDepartFreezed:!1,ancestorGroups:[],members:[],deletedMember:{},isShowAddMemberDialog:!1,showDeleteMemberDialog:!1,repos:[],deletedRepo:{},isShowAddRepoDialog:!1,showDeleteRepoDialog:!1,groups:[],subGroupID:"",subGroupName:"",isShowAddDepartDialog:!1,showDeleteDepartDialog:!1,showSetGroupQuotaDialog:!1},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.groupID;this.listOrgGroupRepo(e),this.listOrgMembers(e)}},{key:"componentWillReceiveProps",value:function(e){this.props.groupID!==e.groupID&&(this.listOrgGroupRepo(e.groupID),this.listOrgMembers(e.groupID))}},{key:"render",value:function(){var e=this,t=this.state,r=t.members,n=t.repos,s=t.groups,a=this.props.groupID,i="btn btn-secondary operation-item",l=Object(b.jsxs)(c.Fragment,{children:[a&&Object(b.jsx)("button",{className:i,title:Object(j.rb)("New Sub-department"),onClick:this.toggleAddDepartDialog,children:Object(j.rb)("New Sub-department")}),a&&Object(b.jsx)("button",{className:i,title:Object(j.rb)("Add Member"),onClick:this.toggleAddMemberDialog,children:Object(j.rb)("Add Member")}),a&&Object(b.jsx)("button",{className:i,onClick:this.toggleAddRepoDialog,title:Object(j.rb)("New Library"),children:Object(j.rb)("New Library")}),this.state.isShowAddMemberDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Ze,{toggle:this.toggleAddMemberDialog,onMemberChanged:this.onMemberChanged,groupID:a})}),this.state.isShowAddRepoDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(tt,{toggle:this.toggleAddRepoDialog,onRepoChanged:this.onRepoChanged,groupID:a})}),this.state.isShowAddDepartDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Ve,{onDepartChanged:this.onSubDepartChanged,parentGroupID:a,toggle:this.toggleAddDepartDialog})})]});return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{children:l}),Object(b.jsxs)("div",{className:"main-panel-center flex-row h-100",children:[Object(b.jsxs)("div",{className:"cur-view-container o-auto",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsxs)("h3",{className:"sf-heading",children:[a?Object(b.jsx)(h.a,{to:j.rc+"org/departmentadmin/",children:Object(j.rb)("Departments")}):Object(b.jsx)("span",{children:Object(j.rb)("Departments")}),this.state.ancestorGroups.map((function(e){var t=j.rc+"org/departmentadmin/groups/"+e.id+"/";return Object(b.jsxs)("span",{children:[" / ",Object(b.jsx)(h.a,{to:t,children:e.name})]},e.id)})),a&&Object(b.jsxs)("span",{children:[" / ",this.state.groupName]})]})})}),Object(b.jsxs)("div",{className:"cur-view-subcontainer org-groups",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("Sub-departments")})})}),Object(b.jsx)("div",{className:"cur-view-content",children:s&&s.length>0?Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"40%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"25%",children:Object(j.rb)("Created At")}),Object(b.jsx)("th",{width:"20%",children:Object(j.rb)("Quota")}),Object(b.jsx)("th",{width:"15%"})]})}),Object(b.jsx)("tbody",{children:s.map((function(t,r){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(it,{group:t,isItemFreezed:e.state.isDepartFreezed,onFreezedItem:e.onFreezedDepart,onUnfreezedItem:e.onUnfreezedDepart,onDepartmentNameChanged:e.onDepartmentNameChanged,showDeleteDepartDialog:e.showDeleteDepartDialog,showSetGroupQuotaDialog:e.showSetGroupQuotaDialog})},t.id)}))})]}):Object(b.jsx)("p",{className:"no-group",children:Object(j.rb)("No sub-departments")})})]}),Object(b.jsxs)("div",{className:"cur-view-subcontainer org-members",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("Members")})})}),Object(b.jsx)("div",{className:"cur-view-content",children:r&&0!==r.length?Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"5%"}),Object(b.jsx)("th",{width:"50%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Role")}),Object(b.jsx)("th",{width:"30%"})]})}),Object(b.jsx)("tbody",{children:r.map((function(t,r){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(st,{member:t,showDeleteMemberDialog:e.showDeleteMemberDialog,isItemFreezed:e.state.isItemFreezed,onMemberChanged:e.onMemberChanged,toggleItemFreezed:e.toggleItemFreezed,groupID:a})},r)}))})]}):Object(b.jsx)("p",{className:"no-member",children:Object(j.rb)("No members")})})]}),Object(b.jsxs)("div",{className:"cur-view-subcontainer org-libriries",children:[Object(b.jsx)("div",{className:"cur-view-path",children:Object(b.jsx)("div",{className:"fleft",children:Object(b.jsx)("h3",{className:"sf-heading",children:Object(j.rb)("Libraries")})})}),n.length>0?Object(b.jsx)("div",{className:"cur-view-content",children:Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"5%"}),Object(b.jsx)("th",{width:"50%",children:Object(j.rb)("Name")}),Object(b.jsx)("th",{width:"30%",children:Object(j.rb)("Size")}),Object(b.jsx)("th",{width:"15%"})]})}),Object(b.jsx)("tbody",{children:n.map((function(t,r){return Object(b.jsx)(o.a.Fragment,{children:Object(b.jsx)(at,{repo:t,showDeleteRepoDialog:e.showDeleteRepoDialog})},r)}))})]})}):Object(b.jsx)("p",{className:"no-libraty",children:Object(j.rb)("No libraries")})]})]}),Object(b.jsxs)(o.a.Fragment,{children:[this.state.showDeleteMemberDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(et,{toggle:this.toggleCancel,onMemberChanged:this.onMemberChanged,member:this.state.deletedMember,groupID:a})}),this.state.showDeleteRepoDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(rt,{toggle:this.toggleCancel,onRepoChanged:this.onRepoChanged,repo:this.state.deletedRepo,groupID:a})}),this.state.showDeleteDepartDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(Qe,{toggle:this.toggleCancel,groupID:this.state.subGroupID,groupName:this.state.subGroupName,onDepartChanged:this.onSubDepartChanged})}),this.state.showSetGroupQuotaDialog&&Object(b.jsx)(C.a,{children:Object(b.jsx)(He,{toggle:this.toggleCancel,groupID:this.state.subGroupID,onDepartChanged:this.onSubDepartChanged})})]})]})]})}}]),r}(o.a.Component),st=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({highlight:!1})},s.toggleMemberRoleMenu=function(){s.setState({showRoleMenu:!s.state.showRoleMenu})},s.onChangeUserRole=function(e){var t="Admin"===e;O.a.orgAdminSetGroupMemberRole(j.Vb,s.props.groupID,s.props.member.email,t).then((function(e){s.props.onMemberChanged()})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)})),s.setState({highlight:!1})},s.state={highlight:!1,showRoleMenu:!1},s.roles=["Admin","Member"],s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.member,t=this.state.highlight,r=j.gc+"/org/useradmin/info/"+e.email+"/";return"Owner"===e.role?null:Object(b.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:e.avatar_url,alt:"member-header",width:"24",className:"avatar"})}),Object(b.jsx)("td",{children:Object(b.jsx)("a",{href:r,children:e.name})}),Object(b.jsx)("td",{children:Object(b.jsx)(Xe.a,{isTextMode:!0,isEditIconShow:t,currentRole:e.role,roles:this.roles,onRoleChanged:this.onChangeUserRole,toggleItemFreezed:this.props.toggleItemFreezed})}),this.props.isItemFreezed?Object(b.jsx)("td",{}):Object(b.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteMemberDialog.bind(this,e),children:Object(b.jsx)("span",{className:"sf2-icon-x3 action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}]),r}(o.a.Component),at=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.setState({highlight:!0})},s.onMouseLeave=function(){s.setState({highlight:!1})},s.state={highlight:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.repo,t=this.state.highlight,r=f.a.getLibIconUrl(e);return Object(b.jsxs)("tr",{className:t?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)("img",{src:r,width:"24",alt:Object(j.rb)("icon")})}),Object(b.jsx)("td",{children:e.name}),Object(b.jsxs)("td",{children:[f.a.bytesToSize(e.size)," "]}),Object(b.jsx)("td",{className:"cursor-pointer text-center",onClick:this.props.showDeleteRepoDialog.bind(this,e),children:Object(b.jsx)("span",{className:"sf2-icon-delete action-icon ".concat(t?"":"vh"),title:"Delete"})})]})}}]),r}(o.a.Component),it=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({isOpIconShown:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({isOpIconShown:!1,highlight:!1})},s.translateOperations=function(e){var t="";switch(e){case"Rename":t=Object(j.rb)("Rename");break;case"Delete":t=Object(j.rb)("Delete")}return t},s.onMenuItemClick=function(e){var t=s.props.group;switch(e){case"Rename":s.toggleRenameDialog();break;case"Delete":s.props.showDeleteDepartDialog(t)}},s.onUnfreezedItem=function(){s.setState({highlight:!1,isOpIconShow:!1}),s.props.onUnfreezedItem()},s.toggleRenameDialog=function(){s.setState({isRenameDialogOpen:!s.state.isRenameDialogOpen})},s.state={highlight:!1,isOpIconShown:!1,isRenameDialogOpen:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.group,t=this.state,r=t.highlight,n=t.isOpIconShown,s=t.isRenameDialogOpen,a=j.rc+"org/departmentadmin/groups/"+e.id+"/";return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("tr",{className:r?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:Object(b.jsx)(h.a,{to:a,children:e.name})}),Object(b.jsx)("td",{children:A()(e.created_at).fromNow()}),Object(b.jsxs)("td",{onClick:this.props.showSetGroupQuotaDialog.bind(this,e.id),children:[f.a.bytesToSize(e.quota)," ",Object(b.jsx)("span",{title:"Edit Quota",className:"fa fa-pencil-alt attr-action-icon ".concat(r?"":"vh")})]}),Object(b.jsx)("td",{children:n&&Object(b.jsx)(Ke.a,{operations:["Rename","Delete"],translateOperations:this.translateOperations,onMenuItemClick:this.onMenuItemClick,onFreezedItem:this.props.onFreezedItem,onUnfreezedItem:this.onUnfreezedItem})})]}),s&&Object(b.jsx)(Ye,{orgID:j.Vb,groupID:e.id,name:e.name,toggle:this.toggleRenameDialog,onDepartmentNameChanged:this.props.onDepartmentNameChanged})]})}}]),r}(o.a.Component),ct=nt,ot=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).tabItemClick=function(e){s.props.tabItemClick(e)},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{className:"main-panel-center flex-row",children:Object(b.jsxs)("div",{className:"cur-view-container",children:[Object(b.jsx)("div",{className:"cur-view-path org-user-nav",children:Object(b.jsxs)("ul",{className:"nav",children:[Object(b.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("logadmin")},children:Object(b.jsx)(h.a,{className:"nav-link ".concat("logadmin"===this.props.currentTab?"active":""),to:j.rc+"org/logadmin/",title:Object(j.rb)("File Access"),children:Object(j.rb)("File Access")})}),Object(b.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("file-update")},children:Object(b.jsx)(h.a,{className:"nav-link ".concat("file-update"===this.props.currentTab?"active":""),to:j.rc+"org/logadmin/file-update/",title:Object(j.rb)("File Update"),children:Object(j.rb)("File Update")})}),Object(b.jsx)("li",{className:"nav-item",onClick:function(){return e.tabItemClick("perm-audit")},children:Object(b.jsx)(h.a,{className:"nav-link ".concat("perm-audit"===this.props.currentTab?"active":""),to:j.rc+"org/logadmin/perm-audit/",title:Object(j.rb)("Permission"),children:Object(j.rb)("Permission")})})]})}),this.props.children]})})]})}}]),r}(c.Component),lt=r(22);A.a.locale(j.Fb);var dt=function e(t){Object(n.a)(this,e),this.ip=t.ip,this.type=t.type,this.device=t.device,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.file_name=t.file_name,this.file_path=t.file_path,this.user_name=t.user_name,this.user_email=t.user_email,this.user_contact_email=t.user_contact_email,this.time=A()(t.time).format("YYYY-MM-DD HH:mm:ss")};r(467);A.a.locale(j.Fb);var ht=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).initData=function(e,t,r){O.a.orgAdminListFileAudit(e,t,r).then((function(e){var t=e.data.log_list.map((function(e){return new dt(e)}));s.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page,userSelected:e.data.user_selected,repoSelected:e.data.repo_selected})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.onChangePageNum=function(e,t){e.preventDefault();var r=s.state.page;1==t?r+=1:r-=1;var n=s.state.userSelected,a=s.state.repoSelected;s.initData(n,a,r)},s.filterUser=function(e){s.setState({userSelected:e})},s.filterRepo=function(e){s.setState({repoSelected:e})},s.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,r=this.state.repoSelected;this.initData(t,r,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return Object(b.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&Object(b.jsxs)(o.a.Fragment,{children:[this.state.userSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"24%",children:Object(j.rb)("User")}),Object(b.jsx)("th",{width:"10%",children:Object(j.rb)("Type")}),Object(b.jsx)("th",{width:"13%",children:Object(j.rb)("IP")}),Object(b.jsx)("th",{width:"17%",children:Object(j.rb)("Date")}),Object(b.jsx)("th",{width:"18%",children:Object(j.rb)("Library")}),Object(b.jsx)("th",{width:"18%",children:Object(j.rb)("File")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,r){return Object(b.jsx)(jt,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},r)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.rb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.rb)("Next")})]})]})}}]),r}(o.a.Component),jt=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({showMenu:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({showMenu:!1,highlight:!1})},s.toggleUserDropdown=function(){s.setState({userDropdownOpen:!s.state.userDropdownOpen})},s.renderUser=function(e){return e.user_email?Object(b.jsxs)("span",{children:[Object(b.jsx)("a",{href:j.rc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",Object(b.jsxs)(m.i,{size:"sm",isOpen:s.state.userDropdownOpen,toggle:s.toggleUserDropdown,className:s.state.highlight?"":"vh",tag:"span",children:[Object(b.jsx)(m.l,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.k,{children:Object(b.jsxs)(m.j,{onClick:s.props.filterUser.bind(Object(lt.a)(s),e.user_email),children:[Object(j.rb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):Object(j.rb)("Anonymous User")},s.renderType=function(e){return-1!=e.indexOf("web")&&(e="web"),-1!=e.indexOf("api")&&(e="api"),-1!=e.indexOf("share-link")&&(e="share link"),e},s.toggleRepoDropdown=function(){s.setState({repoDropdownOpen:!s.state.repoDropdownOpen})},s.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{children:t}),e.repo_name&&Object(b.jsxs)(m.i,{size:"sm",isOpen:s.state.repoDropdownOpen,toggle:s.toggleRepoDropdown,className:s.state.highlight?"":"vh",children:[Object(b.jsx)(m.l,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.k,{children:Object(b.jsxs)(m.j,{size:"sm",onClick:s.props.filterRepo.bind(Object(lt.a)(s),e.repo_name),children:[Object(j.rb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},s.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:this.renderUser(e)}),Object(b.jsx)("td",{children:this.renderType(e.type)}),Object(b.jsx)("td",{children:e.ip}),Object(b.jsx)("td",{children:A()(e.time).format("YYYY-MM-DD HH:mm:ss")}),Object(b.jsx)("td",{children:this.renderRepo(e)}),Object(b.jsx)("td",{children:Object(b.jsx)("span",{title:e.file_path,children:e.file_name})})]})}}]),r}(o.a.Component),ut=ht;A.a.locale(j.Fb);var bt=function e(t){Object(n.a)(this,e),this.repo_id=t.repo_id,this.description=t.description,this.repo_name=t.repo_name,this.user_name=t.user_name,this.user_email=t.user_email,this.repo_encrypted=t.repo_encrypted,this.repo_commit_id=t.repo_commit_id,this.user_contact_email=t.user_contact_email,this.time=A()(t.time).format("YYYY-MM-DD HH:mm:ss")},pt=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).renderContentItem=function(e){var t="";t+='<ul class="list-group list-group-flush">';for(var r=0,n=e.length;r<n;r++)t+='<li class="list-group-item">'+e[r]+"</li>";return{__html:t+="</ul>"}},s.renderContent=function(){return s.state.newfile.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.rb)("New files")}),Object(b.jsx)("p",{children:s.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:s.renderContentItem(s.state.newfile)})]}):s.state.removed.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.rb)("Deleted files")}),Object(b.jsx)("p",{children:s.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:s.renderContentItem(s.state.removed)})]}):s.state.renamed.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.rb)("Renamed or Moved files")}),Object(b.jsx)("p",{children:s.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:s.renderContentItem(s.state.renamed)})]}):s.state.modified.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.rb)("Modified files")}),Object(b.jsx)("p",{children:s.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:s.renderContentItem(s.state.modified)})]}):s.state.newdir.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.rb)("New directories")}),Object(b.jsx)("p",{children:s.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:s.renderContentItem(s.state.newdir)})]}):s.state.deldir.length>0?Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{children:Object(j.rb)("Deleted directories")}),Object(b.jsx)("p",{children:s.state.time}),Object(b.jsx)("div",{dangerouslySetInnerHTML:s.renderContentItem(s.state.deldir)})]}):void 0},s.state={time:"",renamed:[],deldir:[],modified:[],newdir:[],newfile:[],removed:[]},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;O.a.orgAdminGetFileUpdateDetail(this.props.repoID,this.props.commitID).then((function(t){e.setState({time:t.data.date_time,renamed:e.state.renamed.concat(t.data.renamed),deldir:e.state.deldir.concat(t.data.deldir),modified:e.state.modified.concat(t.data.modified),newdir:e.state.newdir.concat(t.data.newdir),newfile:e.state.newfile.concat(t.data.new),removed:e.state.removed.concat(t.data.removed)})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))}},{key:"render",value:function(){return Object(b.jsxs)(m.u,{isOpen:!0,toggle:this.props.toggleCancel,children:[Object(b.jsx)(m.x,{toggle:this.props.toggleCancel,children:Object(j.rb)("Modification Details")}),Object(b.jsx)(m.v,{children:this.renderContent()})]})}}]),r}(o.a.Component);A.a.locale(j.Fb);var gt=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).initData=function(e,t,r){O.a.orgAdminListFileUpdate(e,t,r).then((function(e){var t=e.data.log_list.map((function(e){return new bt(e)}));s.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.onChangePageNum=function(e,t){e.preventDefault();var r=s.state.page;1==t?r+=1:r-=1;var n=s.state.userSelected,a=s.state.repoSelected;s.initData(n,a,r)},s.toggleCancelDetail=function(){s.setState({showDetails:!s.state.showDetails})},s.onDetails=function(e,t){e.preventDefault(),s.setState({showDetails:!s.state.showDetails,repoID:t.repo_id,commitID:t.repo_commit_id})},s.filterUser=function(e){s.setState({userSelected:e})},s.filterRepo=function(e){s.setState({repoSelected:e})},s.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1,showDetails:!1,repoID:"",commitID:""},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,r=this.state.repoSelected;this.initData(t,r,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return Object(b.jsxs)("div",{className:"cur-view-content",children:[(this.state.userSelected||this.state.repoSelected)&&Object(b.jsxs)(o.a.Fragment,{children:[this.state.userSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),this.state.repoSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterRepo.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.repoSelected})," \u2716"]})]}),Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"25%",children:Object(j.rb)("User")}),Object(b.jsx)("th",{width:"17%",children:Object(j.rb)("Date")}),Object(b.jsx)("th",{width:"25%",children:Object(j.rb)("Library")}),Object(b.jsx)("th",{width:"33%",children:Object(j.rb)("Action")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,r){return Object(b.jsx)(mt,{fileEvent:t,isItemFreezed:e.state.isItemFreezed,onDetails:e.onDetails,filterUser:e.filterUser,filterRepo:e.filterRepo,userSelected:e.state.userSelected,repoSelected:e.state.repoSelected},r)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.rb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.rb)("Next")})]}),this.state.showDetails&&Object(b.jsx)(C.a,{children:Object(b.jsx)(pt,{repoID:this.state.repoID,commitID:this.state.commitID,toggleCancel:this.toggleCancelDetail})})]})}}]),r}(c.Component),mt=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({showMenu:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({showMenu:!1,highlight:!1})},s.toggleUserDropdown=function(){s.setState({userDropdownOpen:!s.state.userDropdownOpen})},s.renderUser=function(e){return e.user_email?Object(b.jsxs)("span",{children:[Object(b.jsx)("a",{href:j.rc+"org/useradmin/info/"+e.user_email+"/",children:e.user_name})," ",Object(b.jsxs)(m.i,{size:"sm",isOpen:s.state.userDropdownOpen,toggle:s.toggleUserDropdown,className:s.state.highlight?"":"vh",tag:"span",children:[Object(b.jsx)(m.l,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.k,{children:Object(b.jsxs)(m.j,{onClick:s.props.filterUser.bind(Object(lt.a)(s),e.user_email),children:[Object(j.rb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.user_name})]})})]})]}):Object(j.rb)("Anonymous User")},s.toggleRepoDropdown=function(){s.setState({repoDropdownOpen:!s.state.repoDropdownOpen})},s.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),Object(b.jsxs)("span",{children:[Object(b.jsx)("span",{children:t}),e.repo_name&&Object(b.jsxs)(m.i,{size:"sm",isOpen:s.state.repoDropdownOpen,toggle:s.toggleRepoDropdown,className:s.state.highlight?"":"vh",children:[Object(b.jsx)(m.l,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.k,{children:Object(b.jsxs)(m.j,{size:"sm",onClick:s.props.filterRepo.bind(Object(lt.a)(s),e.repo_name),children:[Object(j.rb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.repo_name})]})})]})]})},s.renderAction=function(e){return e.repo_encrypted||!e.repo_id?Object(b.jsx)("td",{children:e.description}):Object(b.jsxs)("td",{children:[e.description,Object(b.jsx)("a",{className:"font-weight-normal text-muted ml-1",href:"#",onClick:function(t){return s.props.onDetails(t,e)},children:Object(j.rb)("Details")})]})},s.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1,repoDropdownOpen:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.fileEvent;return this.props.userSelected&&e.user_email!==this.props.userSelected||this.props.repoSelected&&e.repo_name!==this.props.repoSelected?null:Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:this.renderUser(e)}),Object(b.jsx)("td",{children:A()(e.time).format("YYYY-MM-DD HH:mm:ss")}),Object(b.jsx)("td",{children:this.renderRepo(e)}),this.renderAction(e)]})}}]),r}(o.a.Component),Ot=gt;A.a.locale(j.Fb);var ft=function e(t){Object(n.a)(this,e),this.from_user_name=t.from_user_name,this.from_user_email=t.from_user_email,this.from_user_contact_email=t.from_user_contact_email,this.to_user_email=t.to_user_email,this.to_user_name=t.to_user_name,this.to_user_contact_email=t.to_user_contact_email,this.to_group_name=t.to_group_name,this.to_group_id=t.to_group_id,this.type=t.type,this.repo_id=t.repo_id,this.repo_name=t.repo_name,this.folder_name=t.folder_name,this.folder_path=t.folder_path,this.time=A()(t.time).format("YYYY-MM-DD HH:mm:ss"),this.permission=t.permission};A.a.locale(j.Fb);var xt=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).initData=function(e,t,r){O.a.orgAdminListPermAudit(e,t,r).then((function(e){var t=e.data.log_list.map((function(e){return new ft(e)}));s.setState({eventList:t,pageNext:e.data.page_next,page:e.data.page})})).catch((function(e){var t=f.a.getErrorMsg(e);x.a.danger(t)}))},s.onChangePageNum=function(e,t){e.preventDefault();var r=s.state.page;1==t?r+=1:r-=1,s.initData(r)},s.filterUser=function(e){s.setState({userSelected:e})},s.state={page:1,pageNext:!1,eventList:[],userSelected:"",repoSelected:"",isItemFreezed:!1},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this.state.page,t=this.state.userSelected,r=this.state.repoSelected;this.initData(t,r,e)}},{key:"render",value:function(){var e=this,t=this.state.eventList;return Object(b.jsxs)("div",{className:"cur-view-content",children:[this.state.userSelected&&Object(b.jsxs)("span",{className:"audit-unselect-item",onClick:this.filterUser.bind(this,null),children:[Object(b.jsx)("span",{className:"no-deco",children:this.state.userSelected})," \u2716"]}),Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{width:"18%",children:Object(j.rb)("Share From")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Share To")}),Object(b.jsx)("th",{width:"8%",children:Object(j.rb)("Actions")}),Object(b.jsx)("th",{width:"13%",children:Object(j.rb)("Permission")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Library")}),Object(b.jsx)("th",{width:"15%",children:Object(j.rb)("Folder")}),Object(b.jsx)("th",{width:"16%",children:Object(j.rb)("Date")})]})}),Object(b.jsx)("tbody",{children:t.map((function(t,r){return Object(b.jsx)(vt,{permEvent:t,isItemFreezed:e.state.isItemFreezed,filterUser:e.filterUser,userSelected:e.state.userSelected},r)}))})]}),Object(b.jsxs)("div",{className:"paginator",children:[1!=this.state.page&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,-1)},children:Object(j.rb)("Previous")}),1!=this.state.page&&this.state.pageNext&&Object(b.jsx)("span",{children:" | "}),this.state.pageNext&&Object(b.jsx)("a",{href:"#",onClick:function(t){return e.onChangePageNum(t,1)},children:Object(j.rb)("Next")})]})]})}}]),r}(c.Component),vt=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMouseEnter=function(){s.props.isItemFreezed||s.setState({showMenu:!0,highlight:!0})},s.onMouseLeave=function(){s.props.isItemFreezed||s.setState({showMenu:!1,highlight:!1})},s.renderFromUser=function(e){return e.from_user_email?Object(b.jsxs)("span",{children:[Object(b.jsx)("a",{href:j.rc+"org/useradmin/info/"+e.from_user_email+"/",children:e.from_user_name})," ",Object(b.jsxs)(m.i,{size:"sm",isOpen:s.state.userDropdownOpen,toggle:s.toggleUserDropdown,className:s.state.highlight?"":"vh",tag:"span",children:[Object(b.jsx)(m.l,{tag:"i",className:"sf-dropdown-toggle sf2-icon-caret-down"}),Object(b.jsx)(m.k,{children:Object(b.jsxs)(m.j,{onClick:s.props.filterUser.bind(Object(lt.a)(s),e.from_user_email),children:[Object(j.rb)("Only Show")," ",Object(b.jsx)("span",{className:"font-weight-bold",children:e.from_user_name})]})})]})]}):Object(j.rb)("Anonymous User")},s.toggleUserDropdown=function(){s.setState({userDropdownOpen:!s.state.userDropdownOpen})},s.renderToUser=function(e){return-1!=e.type.indexOf("public")?Object(b.jsx)("a",{href:j.rc+"org/",children:Object(j.rb)("Organization")}):-1!=e.type.indexOf("group")?e.to_group_name?Object(b.jsx)("a",{href:j.rc+"org/groupadmin/"+e.to_group_id+"/",children:e.to_group_name}):"Deleted":-1!=e.type.indexOf("user")?Object(b.jsx)("a",{href:j.rc+"org/useradmin/info/"+e.to_user_email+"/",children:e.to_user_name}):void 0},s.renderType=function(e){return-1!=e.indexOf("add")&&(e="Add"),-1!=e.indexOf("modify")&&(e="Modify"),-1!=e.indexOf("delete")&&(e="Delete"),e},s.renderRepo=function(e){var t="Deleted";return e.repo_name&&(t=e.repo_name),t},s.renderFolder=function(e){var t="/";return e&&(t=e),t},s.state={highlight:!1,showMenu:!1,isItemMenuShow:!1,userDropdownOpen:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this.props.permEvent;return this.props.userSelected&&e.from_user_email!==this.props.userSelected?null:Object(b.jsxs)("tr",{className:this.state.highlight?"tr-highlight":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(b.jsx)("td",{children:this.renderFromUser(e)}),Object(b.jsx)("td",{children:this.renderToUser(e)}),Object(b.jsx)("td",{children:this.renderType(e.type)}),Object(b.jsx)("td",{children:f.a.sharePerms(e.permission)}),Object(b.jsx)("td",{children:this.renderRepo(e)}),Object(b.jsx)("td",{children:this.renderFolder(e.folder_name)}),Object(b.jsx)("td",{children:A()(e.time).format("YYYY-MM-DD HH:mm:ss")})]})}}]),r}(o.a.Component),wt=xt,Dt=(r(168),r(113),function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onCloseSidePanel=function(){s.setState({isSidePanelClosed:!s.state.isSidePanelClosed})},s.tabItemClick=function(e){s.setState({currentTab:e})},s.state={isSidePanelClosed:!1,currentTab:"users"},s}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=window.location.href.split("/"),t=e[e.length-2];-1!=location.href.indexOf("".concat(j.rc,"org/useradmin"))&&(t="users"),-1!=location.href.indexOf("".concat(j.rc,"org/groupadmin"))&&(t="groupadmin"),-1!=location.href.indexOf("".concat(j.rc,"org/departmentadmin"))&&(t="departmentadmin"),this.setState({currentTab:t})}},{key:"render",value:function(){var e=this.state,t=e.isSidePanelClosed,r=e.currentTab;return Object(b.jsxs)("div",{id:"main",children:[Object(b.jsx)(p,{isSidePanelClosed:t,onCloseSidePanel:this.onCloseSidePanel,currentTab:r,tabItemClick:this.tabItemClick}),Object(b.jsx)("div",{className:"main-panel o-hidden",children:Object(b.jsxs)(h.b,{className:"reach-router",children:[Object(b.jsx)(Ee,{path:j.rc+"org/orgmanage"}),Object(b.jsx)(U,{path:j.rc+"org/useradmin"}),Object(b.jsx)(L,{path:j.rc+"org/useradmin/search-users"}),Object(b.jsx)(T,{path:j.rc+"org/useradmin/admins/"}),Object(b.jsx)(X,{path:j.rc+"org/useradmin/info/:email/"}),Object(b.jsx)(se,{path:j.rc+"org/useradmin/info/:email/repos/"}),Object(b.jsx)(le,{path:j.rc+"org/useradmin/info/:email/shared-repos/"}),Object(b.jsx)(be,{path:j.rc+"org/groupadmin"}),Object(b.jsx)(me,{path:j.rc+"org/groupadmin/search-groups"}),Object(b.jsx)(we,{path:j.rc+"org/groupadmin/:groupID/"}),Object(b.jsx)(Ce,{path:j.rc+"org/groupadmin/:groupID/repos/"}),Object(b.jsx)(Ae,{path:j.rc+"org/groupadmin/:groupID/members/"}),Object(b.jsx)(Le,{path:j.rc+"org/repoadmin"}),Object(b.jsx)(qe,{path:j.rc+"org/publinkadmin"}),Object(b.jsxs)(Be,{path:j.rc+"org/departmentadmin",children:[Object(b.jsx)($e,{path:"/"}),Object(b.jsx)(ct,{path:"groups/:groupID"})]}),Object(b.jsxs)(ot,{path:j.rc+"org/logadmin",currentTab:r,tabItemClick:this.tabItemClick,children:[Object(b.jsx)(ut,{path:"/"}),Object(b.jsx)(Ot,{path:"file-update"}),Object(b.jsx)(wt,{path:"perm-audit"})]})]})})]})}}]),r}(o.a.Component));d.a.render(Object(b.jsx)(Dt,{}),document.getElementById("wrapper"))},191:function(e,t,r){},220:function(e,t,r){},46:function(e,t,r){"use strict";var n=r(6),s=r(7),a=r(9),i=r(8),c=r(2),o=r.n(c),l=r(4),d=r(1),h=r(5),j=r(0),u=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).onMenuItemClick=function(e){var t=h.a.getEventData(e,"op");s.props.onMenuItemClick(t)},s.onDropdownToggleClick=function(e){s.toggleOperationMenu(e)},s.toggleOperationMenu=function(e){s.setState({isItemMenuShow:!s.state.isItemMenuShow},(function(){s.state.isItemMenuShow?s.props.onFreezedItem():s.props.onUnfreezedItem()}))},s.state={isItemMenuShow:!1},s}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.operations,n=t.translateOperations;return Object(j.jsxs)(l.i,{isOpen:this.state.isItemMenuShow,toggle:this.toggleOperationMenu,children:[Object(j.jsx)(l.l,{tag:"i",className:"d-flex w-5 h-5 align-items-center justify-content-center sf-dropdown-toggle fa fa-ellipsis-v",title:Object(d.rb)("More Operations"),"data-toggle":"dropdown","aria-expanded":this.state.isItemMenuShow}),Object(j.jsx)(l.k,{className:"my-1 mr-2",children:r.map((function(t,r){return Object(j.jsx)(l.j,{"data-op":t,onClick:e.onMenuItemClick,children:n(t)},r)}))})]})}}]),r}(o.a.Component);t.a=u},467:function(e,t,r){}},[[1560,1,0]]]);
//# sourceMappingURL=orgAdmin.chunk.js.map